<!DOCTYPE html>
<html lang='en'>
<head>
	<title>SpringRoll Container v0.4.0 API Documentation : src/container/Features.js</title>
	<meta charset='utf-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
	<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>
	<link rel='shortcut icon' type='image/png' href='../assets/images/favicon.ico?v=0.4.0'>
	<link href='//fonts.googleapis.com/css?family=Titillium+Web:300,200,600' rel='stylesheet' type='text/css'>
	<link rel='stylesheet' type='text/css' href='../assets/css/libraries.css?v=0.4.0'>
	<link rel='stylesheet' type='text/css' href='../assets/css/main.css?v=0.4.0'>
</head>
<body>
<header>
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class='container'>
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#docs-navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href='https://github.com/SpringRoll/SpringRollContainer'>
						<img src='../assets/images/logo.png?v=0.4.0' class="logo">
					<span class='project-name'>SpringRoll Container</span>
					<span class="sr-only">API Documentation for:</span>
					<span class='version hidden-xs'>v0.4.0</span>
				</a>
			</div>
			<div class="collapse navbar-collapse" id="docs-navbar">
	      <ul class="scope-toggles text-center nav navbar-nav navbar-right">
					<li><input class='scope-toggle' 
						id='toggle-inherited' 
						type='checkbox' 
						data-toggle='toggle' 
						data-on='Inherited' 
						data-off='Inherited' 
						data-size='mini'
						data-width='80'>
					</li>
					<li><input class='scope-toggle' 
						id='toggle-protected' 
						type='checkbox' 
						data-toggle='toggle' 
						data-on='Protected' 
						data-off='Protected' 
						data-size='mini'
						data-width='80'>
					</li>
					<li><input class='scope-toggle' 
						id='toggle-private' 
						type='checkbox' 
						data-toggle='toggle' 
						data-on='Private' 
						data-off='Private' 
						data-size='mini'
						data-width='80'>
					</li>
					<li><input class='scope-toggle' 
						id='toggle-deprecated' 
						type='checkbox' 
						data-toggle='toggle' 
						data-on='Deprecated' 
						data-off='Deprecated' 
						data-size='mini'
						data-width='80'>
					</li>
				</ul>
			</div>
		</div>
	</nav>
</header>
<div class='container'>
<div class='row'>
<nav id='sidebar' class='col-sm-4 col-md-3'>
<h2>APIs</h2>
<div class='input-group'>
  <div class='input-group-addon'>
    <span class='glyphicon glyphicon-search'></span>
  </div>
  <input type='search' class='form-control' id='api-filter' placeholder='Type to filter APIs'>
  <span class='collapsed btn-close glyphicon glyphicon-remove-sign hidden'></span>
</div>
<nav class='navbar navbar-default'>
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="btn-group" role="group" aria-label="...">
    <button type="button" class="sidebar-toggle collapsed btn btn-default" id='toggle-classes' data-target='#classes-collapse'>
      Classes
      <span class='collapsed glyphicon glyphicon-chevron-up'></span>
      <span class='expanded glyphicon glyphicon-chevron-down'></span>
    </button>
    <button type="button" class="sidebar-toggle collapsed btn btn-default" id='toggle-modules' data-target='#modules-collapse'>
      Modules
      <span class='collapsed glyphicon glyphicon-chevron-up'></span>
      <span class='expanded glyphicon glyphicon-chevron-down'></span>
    </button>
  </div>

  <!-- Collect the nav links, forms, and other content for toggling -->
  <div class='collapse' id='classes-collapse'>
    <ul class='nav navbar-nav'>
        <li class='public'>
          <a href='../classes/springroll.Container.html'>springroll.Container</a>
        </li>
        <li class='public'>
          <a href='../classes/springroll.Features.html'>springroll.Features</a>
        </li>
        <li class='public'>
          <a href='../classes/springroll.SavedDataHandler.html'>springroll.SavedDataHandler</a>
        </li>
    </ul>
  </div>

  <!-- Collect the nav links, forms, and other content for toggling -->
  <div class='collapse' id='modules-collapse'>
    <ul class='nav navbar-nav'>
        <li class=''>
          <a href='../modules/Container.html'>Container</a>
        </li>
    </ul>
  </div>
  <!-- /.container-fluid -->
</nav></nav>
<div class='col-sm-8 col-md-9'>
<div id='docs-main' class='apidocs'>
<h1 class="file-heading">File:Features.js</h1>

<div class="file">
<pre class="code prettyprint linenums">/**
 * @module Container
 * @namespace springroll
 */
(function(undefined)
{
	var Debug = include(&#x27;springroll.Debug&#x27;, false);

	/**
	 * Provide feature detection
	 * @class Features
	 */
	var Features = {};

	/**
	 * If the browser has flash
	 * @property {boolean} flash
	 */
	Features.flash = function()
	{
		var hasFlash = false;
		try
		{
			var fo = new ActiveXObject(&#x27;ShockwaveFlash.ShockwaveFlash&#x27;);
			if (fo)
			{
				hasFlash = true;
			}
		}
		catch (e)
		{
			if (navigator.mimeTypes &amp;&amp;
				navigator.mimeTypes[&#x27;application/x-shockwave-flash&#x27;] !== undefined &amp;&amp;
				navigator.mimeTypes[&#x27;application/x-shockwave-flash&#x27;].enabledPlugin)
			{
				hasFlash = true;
			}
		}
		return hasFlash;
	}();

	/**
	 * If the browser has WebGL support
	 * @property {boolean} webgl
	 */
	Features.webgl = function()
	{
		var canvas = document.createElement(&#x27;canvas&#x27;);
		if (&#x27;supportsContext&#x27; in canvas)
		{
			return canvas.supportsContext(&#x27;webgl&#x27;) ||
				canvas.supportsContext(&#x27;experimental-webgl&#x27;);
		}
		return !!window.WebGLRenderingContext;
	}();

	/**
	 * If the browser has Canvas support
	 * @property {boolean} canvas
	 */
	Features.canvas = function()
	{
		var elem = document.createElement(&#x27;canvas&#x27;);
		return !!(elem.getContext &amp;&amp; elem.getContext(&#x27;2d&#x27;));
	}();

	/**
	 * If the browser has WebAudio API support
	 * @property {boolean} webaudio
	 */
	Features.webaudio = function()
	{
		return &#x27;webkitAudioContext&#x27; in window || &#x27;AudioContext&#x27; in window;
	}();

	/**
	 * If the browser has Web Sockets API
	 * @property {boolean} websockets
	 */
	Features.websockets = function()
	{
		return &#x27;WebSocket&#x27; in window || &#x27;MozWebSocket&#x27; in window;
	}();

	/**
	 * If the browser has Geolocation API
	 * @property {boolean} geolocation
	 */
	Features.geolocation = function()
	{
		return &#x27;geolocation&#x27; in navigator;
	}();

	/**
	 * If the browser has Web Workers API
	 * @property {boolean} webworkers
	 */
	Features.webworkers = function()
	{
		return !!window.Worker;
	}();

	/**
	 * If the browser has touch
	 * @property {boolean} touch
	 */
	Features.touch = function()
	{
		return !!((&#x27;ontouchstart&#x27; in window) || // iOS &amp; Android
			(navigator.msPointerEnabled &amp;&amp; navigator.msMaxTouchPoints &gt; 0) || // IE10
			(navigator.pointerEnabled &amp;&amp; navigator.maxTouchPoints &gt; 0)); // IE11+
	}();

	/**
	 * Test for basic browser compatiliblity 
	 * @method basic
	 * @static
	 * @return {String} The error message, if fails
	 */
	Features.basic = function()
	{
		if (!Features.canvas)
		{
			return &#x27;Browser does not support canvas&#x27;;
		}
		else if (!Features.webaudio &amp;&amp; !Features.flash)
		{
			return &#x27;Browser does not support WebAudio or Flash audio&#x27;;
		}
		return null;
	};

	/**
	 * See if the current bowser has the correct features
	 * @method test
	 * @static
	 * @param {object} capabilities The capabilities
	 * @param {object} capabilities.features The features
	 * @param {object} capabilities.features.webgl WebGL required
	 * @param {object} capabilities.features.geolocation Geolocation required
	 * @param {object} capabilities.features.webworkers Web Workers API required
	 * @param {object} capabilities.features.webaudio WebAudio API required
	 * @param {object} capabilities.features.websockets WebSockets required
	 * @param {object} capabilities.sizes The sizes
	 * @param {Boolean} capabilities.sizes.xsmall Screens &lt; 480
	 * @param {Boolean} capabilities.sizes.small Screens &lt; 768
	 * @param {Boolean} capabilities.sizes.medium Screens &lt; 992
	 * @param {Boolean} capabilities.sizes.large Screens &lt; 1200
	 * @param {Boolean} capabilities.sizes.xlarge Screens &gt;= 1200
	 * @param {object} capabilities.ui The ui
	 * @param {Boolean} capabilities.ui.touch Touch capable
	 * @param {Boolean} capabilities.ui.mouse Mouse capable
	 * @return {String|null} The error, or else returns null
	 */
	Features.test = function(capabilities)
	{
		// check for basic compatibility
		var err = Features.basic();
		if (err)
		{
			return err;
		}
		var features = capabilities.features;
		var ui = capabilities.ui;
		var sizes = capabilities.sizes;

		for (var name in features)
		{
			if (Features[name] !== undefined)
			{
				// Failed built-in feature check
				if (features[name] &amp;&amp; !Features[name])
				{
					return &quot;Browser does not support &quot; + name;
				}
				else
				{
					if (DEBUG &amp;&amp; Debug)
						Debug.log(&quot;Browser has &quot; + name);
				}
			}
			else
			{
				if (DEBUG &amp;&amp; Debug)
					Debug.warn(&quot;The feature &quot; + name + &quot; is not supported&quot;);
			}
		}

		// Failed negative touch requirement
		if (!ui.touch &amp;&amp; Features.touch)
		{
			return &quot;Game does not support touch input&quot;;
		}

		// Failed mouse requirement
		if (!ui.mouse &amp;&amp; !Features.touch)
		{
			return &quot;Game does not support mouse input&quot;;
		}

		// Check the sizes
		var size = Math.max(window.screen.width, window.screen.height);

		if (!sizes.xsmall &amp;&amp; size &lt; 480)
		{
			return &quot;Game doesn&#x27;t support extra small screens&quot;;
		}
		if (!sizes.small &amp;&amp; size &lt; 768)
		{
			return &quot;Game doesn&#x27;t support small screens&quot;;
		}
		if (!sizes.medium &amp;&amp; size &lt; 992)
		{
			return &quot;Game doesn&#x27;t support medium screens&quot;;
		}
		if (!sizes.large &amp;&amp; size &lt; 1200)
		{
			return &quot;Game doesn&#x27;t support large screens&quot;;
		}
		if (!sizes.xlarge &amp;&amp; size &gt;= 1200)
		{
			return &quot;Game doesn&#x27;t support extra large screens&quot;;
		}
		return null;
	};

	if (DEBUG &amp;&amp; Debug)
	{
		Debug.info(&quot;Browser Feature Detection&quot; +
			(&quot;\n\tFlash support &quot; + (Features.flash ? &quot;\u2713&quot; : &quot;\u00D7&quot;)) +
			(&quot;\n\tCanvas support &quot; + (Features.canvas ? &quot;\u2713&quot; : &quot;\u00D7&quot;)) +
			(&quot;\n\tWebGL support &quot; + (Features.webgl ? &quot;\u2713&quot; : &quot;\u00D7&quot;)) +
			(&quot;\n\tWebAudio support &quot; + (Features.webaudio ? &quot;\u2713&quot; : &quot;\u00D7&quot;))
		);
	}

	//Leak Features namespace
	namespace(&#x27;springroll&#x27;).Features = Features;

})();</pre>
</div></div>
</div>
</div>
</div>
<script src='../assets/js/libraries.js?v=0.4.0'></script>
<script src='../assets/js/main.js?v=0.4.0'></script>
</body>
</html>
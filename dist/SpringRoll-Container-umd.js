!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.SRC=t.SRC||{})}(this,function(t){"use strict";var e={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function u(t){this.map={},t instanceof u?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function a(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function l(t){var e=new FileReader,n=c(e);return e.readAsArrayBuffer(t),n}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){var n;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:e.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:e.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():e.arrayBuffer&&e.blob&&((n=t)&&DataView.prototype.isPrototypeOf(n))?(this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):e.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=h(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,n,i=a(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=c(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(t,e){t=o(t),e=r(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},u.prototype.delete=function(t){delete this.map[o(t)]},u.prototype.get=function(t){return t=o(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},u.prototype.set=function(t,e){this.map[o(t)]=r(e)},u.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},u.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),s(t)},u.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),s(t)},u.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),s(t)},e.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(t,e){var n,i,o=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(n=e.method||this.method||"GET",i=n.toUpperCase(),f.indexOf(i)>-1?i:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function y(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(o))}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},d.call(p.prototype),d.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];v.redirect=function(t,e){if(-1===g.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})};var m=self.DOMException;try{new m}catch(t){(m=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),m.prototype.constructor=m}function b(t,n){return new Promise(function(i,o){var r=new p(t,n);if(r.signal&&r.signal.aborted)return o(new m("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new u,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var o=n.join(":").trim();e.append(i,o)}}),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;i(new v(o,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new m("Aborted","AbortError"))},s.open(r.method,r.url,!0),"include"===r.credentials?s.withCredentials=!0:"omit"===r.credentials&&(s.withCredentials=!1),"responseType"in s&&e.blob&&(s.responseType="blob"),r.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),r.signal&&(r.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&r.signal.removeEventListener("abort",a)}),s.send(void 0===r._bodyInit?null:r._bodyInit)})}b.polyfill=!0,self.fetch||(self.fetch=b,self.Headers=u,self.Request=p,self.Response=v);var w={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},E=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function!");return t},S=function(t,e,n){if(E(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},_={}.toString,B=function(t){return _.call(t).slice(8,-1)},O="".split,x=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?O.call(t,""):Object(t)},P=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},M=function(t){return Object(P(t))},T=Math.ceil,L=Math.floor,j=function(t){return isNaN(t=+t)?0:(t>0?L:T)(t)},k=Math.min,A=function(t){return t>0?k(j(t),9007199254740991):0},F=function(t){return"object"==typeof t?null!==t:"function"==typeof t},C=Array.isArray||function(t){return"Array"==B(t)};function R(t,e){return t(e={exports:{}},e.exports),e.exports}var I,D,U,V,G,N,q,H,W,z,K,$="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),J=function(t){try{return!!t()}catch(t){return!0}},X=!J(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Q=$.document,Y=F(Q)&&F(Q.createElement),Z=function(t){return Y?Q.createElement(t):{}},tt=!X&&!J(function(){return 7!=Object.defineProperty(Z("div"),"a",{get:function(){return 7}}).a}),et=function(t){if(!F(t))throw TypeError(String(t)+" is not an object!");return t},nt=function(t,e){if(!F(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!F(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!F(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!F(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},it=Object.defineProperty,ot={f:X?it:function(t,e,n){if(et(t),e=nt(e,!0),et(n),tt)try{return it(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},rt=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},st=X?function(t,e,n){return ot.f(t,e,rt(1,n))}:function(t,e,n){return t[e]=n,t},ut=function(t,e){try{st($,t,e)}catch(n){$[t]=e}return e},at=R(function(t){var e=$["__core-js_shared__"]||ut("__core-js_shared__",{});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.0.0-beta.3",mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),ct=0,lt=Math.random(),ht=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ct+lt).toString(36))},dt=!J(function(){}),ft=at("wks"),pt=$.Symbol,yt=function(t){return ft[t]||(ft[t]=dt&&pt[t]||(dt?pt:ht)("Symbol."+t))},vt=yt("species"),gt=[].forEach,mt=(U=1==(I=0),V=2==I,G=3==I,N=4==I,q=6==I,H=5==I||q,W=D||function(t,e){var n;return C(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!C(n.prototype)?F(n)&&null===(n=n[vt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},function(t,e,n){for(var i,o,r=M(t),s=x(r),u=S(e,n,3),a=A(s.length),c=0,l=U?W(t,a):V?W(t,0):void 0;a>c;c++)if((H||c in s)&&(o=u(i=s[c],c,r),I))if(U)l[c]=o;else if(o)switch(I){case 3:return!0;case 5:return i;case 6:return c;case 2:l.push(i)}else if(N)return!1;return q?-1:G||N?N:l}),bt=(K=!0,!!(z=gt)&&J(function(){K?z.call(null,function(){},1):z.call(null)}))?gt:function(t){return mt(this,t,arguments[1])};for(var wt in w){var Et=$[wt],St=Et&&Et.prototype;if(St&&St.forEach!==bt)try{st(St,"forEach",bt)}catch(t){St.forEach=bt}}var _t,Bt=function(t){return x(P(t))},Ot={}.hasOwnProperty,xt=function(t,e){return Ot.call(t,e)},Pt=Math.max,Mt=Math.min,Tt={},Lt=(_t=!1,function(t,e,n){var i,o=Bt(t),r=A(o.length),s=function(t,e){var n=j(t);return n<0?Pt(n+e,0):Mt(n,e)}(n,r);if(_t&&e!=e){for(;r>s;)if((i=o[s++])!=i)return!0}else for(;r>s;s++)if((_t||s in o)&&o[s]===e)return _t||s||0;return!_t&&-1}),jt=function(t,e){var n,i=Bt(t),o=0,r=[];for(n in i)!xt(Tt,n)&&xt(i,n)&&r.push(n);for(;e.length>o;)xt(i,n=e[o++])&&(~Lt(r,n)||r.push(n));return r},kt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],At=Object.keys||function(t){return jt(t,kt)},Ft=X?Object.defineProperties:function(t,e){et(t);for(var n,i=At(e),o=i.length,r=0;o>r;)ot.f(t,n=i[r++],e[n]);return t},Ct=$.document,Rt=Ct&&Ct.documentElement,It=at("keys"),Dt=function(t){return It[t]||(It[t]=ht(t))},Ut=Dt("IE_PROTO"),Vt=function(){},Gt=function(){var t,e=Z("iframe"),n=kt.length;for(e.style.display="none",Rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Gt=t.F;n--;)delete Gt.prototype[kt[n]];return Gt()},Nt=Object.create||function(t,e){var n;return null!==t?(Vt.prototype=et(t),n=new Vt,Vt.prototype=null,n[Ut]=t):n=Gt(),void 0===e?n:Ft(n,e)};Tt[Ut]=!0;var qt=yt("unscopables"),Ht=Array.prototype;null==Ht[qt]&&st(Ht,qt,Nt(null));var Wt,zt,Kt,$t=function(t){Ht[qt][t]=!0},Jt={},Xt=at("native-function-to-string",Function.toString),Qt=$.WeakMap;if("function"==typeof Qt&&/native code/.test(Xt.call(Qt))){var Yt=new Qt,Zt=Yt.get,te=Yt.has,ee=Yt.set;Wt=function(t,e){return ee.call(Yt,t,e),e},zt=function(t){return Zt.call(Yt,t)||{}},Kt=function(t){return te.call(Yt,t)}}else{var ne=Dt("state");Tt[ne]=!0,Wt=function(t,e){return st(t,ne,e),e},zt=function(t){return xt(t,ne)?t[ne]:{}},Kt=function(t){return xt(t,ne)}}var ie,oe,re,se={set:Wt,get:zt,has:Kt,enforce:function(t){return Kt(t)?zt(t):Wt(t,{})},getterFor:function(t){return function(e){var n;if(!F(e)||(n=zt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required!");return n}}},ue=R(function(t){var e=se.get,n=se.enforce,i=String(Xt).split("toString");at("inspectSource",function(t){return Xt.call(t)}),(t.exports=function(t,e,o,r){"function"==typeof o&&("string"!=typeof e||xt(o,"name")||st(o,"name",e),n(o).source=i.join("string"==typeof e?e:"")),t===$?ut(e,o):r?t[e]?t[e]=o:st(t,e,o):(delete t[e],st(t,e,o))})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||Xt.call(this)})}),ae=kt.concat("length","prototype"),ce={f:Object.getOwnPropertyNames||function(t){return jt(t,ae)}},le={f:Object.getOwnPropertySymbols},he=$.Reflect,de=he&&he.ownKeys||function(t){var e=ce.f(et(t)),n=le.f;return n?e.concat(n(t)):e},fe={}.propertyIsEnumerable,pe=Object.getOwnPropertyDescriptor,ye={f:pe&&!fe.call({1:2},1)?function(t){var e=pe(this,t);return!!e&&e.enumerable}:fe},ve=Object.getOwnPropertyDescriptor,ge={f:X?ve:function(t,e){if(t=Bt(t),e=nt(e,!0),tt)try{return ve(t,e)}catch(t){}if(xt(t,e))return rt(!ye.f.call(t,e),t[e])}},me=function(t,e){for(var n=de(e),i=ot.f,o=ge.f,r=0;r<n.length;r++){var s=n[r];xt(t,s)||i(t,s,o(e,s))}},be=function(t,e){var n,i,o,r,s=t.target;if(n=t.global?$:t.stat?$[s]||ut(s,{}):($[s]||{}).prototype)for(i in e){if(o=n[i],r=e[i],!t.forced&&void 0!==o){if(typeof r==typeof o)continue;me(r,o)}(t.sham||o&&o.sham)&&st(r,"sham",!0),ue(n,i,r,t.unsafe)}},we=!J(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Ee=Dt("IE_PROTO"),Se=Object.prototype,_e=we?Object.getPrototypeOf:function(t){return t=M(t),xt(t,Ee)?t[Ee]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Se:null},Be=yt("iterator"),Oe=!1;[].keys&&("next"in(re=[].keys())?(oe=_e(_e(re)))!==Object.prototype&&(ie=oe):Oe=!0),null==ie&&(ie={}),xt(ie,Be)||st(ie,Be,function(){return this});var xe={IteratorPrototype:ie,BUGGY_SAFARI_ITERATORS:Oe},Pe=ot.f,Me=yt("toStringTag"),Te=function(t,e,n){t&&!xt(t=n?t:t.prototype,Me)&&Pe(t,Me,{configurable:!0,value:e})},Le=xe.IteratorPrototype,je=function(){return this},ke=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e={},n=!0;try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),n=e instanceof Array}catch(t){n=!1}return function(e,i){return function(t,e){if(et(t),!F(e)&&null!==e)throw TypeError(String(e)+": can't set as a prototype!")}(e,i),n?t.call(e,i):e.__proto__=i,e}}():void 0),Ae=yt("iterator"),Fe=xe.IteratorPrototype,Ce=xe.BUGGY_SAFARI_ITERATORS,Re=function(){return this},Ie=function(t,e,n,i,o,r,s){!function(t,e,n){var i=e+" Iterator";t.prototype=Nt(Le,{next:rt(1,n)}),Te(t,i,!1),Jt[i]=je}(n,e,i);var u,a,c,l=function(t){if(t===o&&y)return y;if(!Ce&&t in f)return f[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,f=t.prototype,p=f[Ae]||f["@@iterator"]||o&&f[o],y=!Ce&&p||l(o),v="Array"==e&&f.entries||p;if(v&&(u=_e(v.call(new t)),Fe!==Object.prototype&&u.next&&(_e(u)!==Fe&&(ke?ke(u,Fe):"function"!=typeof u[Ae]&&st(u,Ae,Re)),Te(u,h,!0))),"values"==o&&p&&"values"!==p.name&&(d=!0,y=function(){return p.call(this)}),f[Ae]!==y&&st(f,Ae,y),Jt[e]=y,o)if(a={values:l("values"),keys:r?y:l("keys"),entries:l("entries")},s)for(c in a)!Ce&&!d&&c in f||ue(f,c,a[c]);else be({target:e,proto:!0,forced:Ce||d},a);return a},De=se.set,Ue=se.getterFor("Array Iterator"),Ve=Ie(Array,"Array",function(t,e){De(this,{type:"Array Iterator",target:Bt(t),index:0,kind:e})},function(){var t=Ue(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}},"values");Jt.Arguments=Jt.Array,$t("keys"),$t("values"),$t("entries");var Ge=yt("iterator"),Ne=yt("toStringTag"),qe=Ve.values;for(var He in w){var We=$[He],ze=We&&We.prototype;if(ze){if(ze[Ge]!==qe)try{st(ze,Ge,qe)}catch(t){ze[Ge]=qe}if(ze[Ne]||st(ze,Ne,He),w[He])for(var Ke in Ve)if(ze[Ke]!==Ve[Ke])try{st(ze,Ke,Ve[Ke])}catch(t){ze[Ke]=Ve[Ke]}}}var $e=$,Je=R(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Xe=R(function(t){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)}),Qe=(Xe.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),Ye=function(t){if(!Qe(t))throw TypeError(t+" is not an object!");return t},Ze=function(t){try{return!!t()}catch(t){return!0}},tn=!Ze(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),en=Je.document,nn=Qe(en)&&Qe(en.createElement),on=!tn&&!Ze(function(){return 7!=Object.defineProperty((t="div",nn?en.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),rn=Object.defineProperty,sn={f:tn?Object.defineProperty:function(t,e,n){if(Ye(t),e=function(t,e){if(!Qe(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!Qe(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!Qe(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!Qe(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e,!0),Ye(n),on)try{return rn(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},un=tn?function(t,e,n){return sn.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},an={}.hasOwnProperty,cn=function(t,e){return an.call(t,e)},ln=0,hn=Math.random(),dn=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ln+hn).toString(36))},fn=R(function(t){var e=dn("src"),n=Function.toString,i=(""+n).split("toString");Xe.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,o,r){var s="function"==typeof o;s&&(cn(o,"name")||un(o,"name",n)),t[n]!==o&&(s&&(cn(o,e)||un(o,e,t[n]?""+t[n]:i.join(String(n)))),t===Je?t[n]=o:r?t[n]?t[n]=o:un(t,n,o):(delete t[n],un(t,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),pn=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},yn=function(t,e,n){var i,o,r,s,u=t&yn.F,a=t&yn.G,c=t&yn.S,l=t&yn.P,h=t&yn.B,d=a?Je:c?Je[e]||(Je[e]={}):(Je[e]||{}).prototype,f=a?Xe:Xe[e]||(Xe[e]={}),p=f.prototype||(f.prototype={});for(i in a&&(n=e),n)r=((o=!u&&d&&void 0!==d[i])?d:n)[i],s=h&&o?pn(r,Je):l&&"function"==typeof r?pn(Function.call,r):r,d&&fn(d,i,r,t&yn.U),f[i]!=r&&un(f,i,s),l&&p[i]!=r&&(p[i]=r)};Je.core=Xe,yn.F=1,yn.G=2,yn.S=4,yn.P=8,yn.B=16,yn.W=32,yn.U=64,yn.R=128;var vn,gn=yn,mn={}.toString,bn=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==function(t){return mn.call(t).slice(8,-1)}(t)?t.split(""):Object(t)},wn=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},En=function(t){return bn(wn(t))},Sn=Math.ceil,_n=Math.floor,Bn=function(t){return isNaN(t=+t)?0:(t>0?_n:Sn)(t)},On=Math.min,xn=Math.max,Pn=Math.min,Mn=Je["__core-js_shared__"]||(Je["__core-js_shared__"]={}),Tn=Mn[vn="keys"]||(Mn[vn]={}),Ln=function(t){return function(e,n,i){var o,r,s=En(e),u=(r=s.length)>0?On(Bn(r),9007199254740991):0,a=function(t,e){return(t=Bn(t))<0?xn(t+e,0):Pn(t,e)}(i,u);if(t&&n!=n){for(;u>a;)if((o=s[a++])!=o)return!0}else for(;u>a;a++)if((t||a in s)&&s[a]===n)return t||a||0;return!t&&-1}}(!1),jn=function(t){return Tn[t]||(Tn[t]=dn(t))}("IE_PROTO"),kn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),An=Object.keys||function(t){return function(t,e){var n,i=En(t),o=0,r=[];for(n in i)n!=jn&&cn(i,n)&&r.push(n);for(;e.length>o;)cn(i,n=e[o++])&&(~Ln(r,n)||r.push(n));return r}(t,kn)},Fn={f:Object.getOwnPropertySymbols},Cn={f:{}.propertyIsEnumerable},Rn=Object.assign,In=!Rn||Ze(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=Rn({},t)[n]||Object.keys(Rn({},e)).join("")!=i})?function(t,e){for(var n=Object(wn(t)),i=arguments.length,o=1,r=Fn.f,s=Cn.f;i>o;)for(var u,a=bn(arguments[o++]),c=r?An(a).concat(r(a)):An(a),l=c.length,h=0;l>h;)s.call(a,u=c[h++])&&(n[u]=a[u]);return n}:Rn;gn(gn.S+gn.F,"Object",{assign:In});var Dn,Un,Vn,Gn=function(t,e,n){if(!(t instanceof e))throw TypeError((n?n+": i":"I")+"ncorrect invocation!");return t},Nn=yt("iterator"),qn=Array.prototype,Hn=yt("toStringTag"),Wn="Arguments"==B(function(){return arguments}()),zn=yt("iterator"),Kn=function(t){if(null!=t)return t[zn]||t["@@iterator"]||Jt[function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Hn))?n:Wn?B(e):"Object"==(i=B(e))&&"function"==typeof e.callee?"Arguments":i}(t)]},$n=function(t,e,n,i){try{return i?e(et(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&et(o.call(t)),e}},Jn=R(function(t){var e={};(t.exports=function(t,n,i,o,r){var s,u,a,c,l,h,d=S(n,i,o?2:1);if(r)s=t;else{if("function"!=typeof(u=Kn(t)))throw TypeError("Target is not iterable!");if(void 0!==(h=u)&&(Jt.Array===h||qn[Nn]===h)){for(a=0,c=A(t.length);c>a;a++)if((o?d(et(l=t[a])[0],l[1]):d(t[a]))===e)return;return}s=u.call(t)}for(;!(l=s.next()).done;)if($n(s,d,l.value,o)===e)return}).BREAK=e}),Xn=yt("iterator"),Qn=function(t,e){if(!e)return!1;var n=!1;try{var i={};i[Xn]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n},Yn=yt("species"),Zn=$.setImmediate,ti=$.clearImmediate,ei=$.process,ni=$.MessageChannel,ii=$.Dispatch,oi=0,ri={},si=function(){var t=+this;if(ri.hasOwnProperty(t)){var e=ri[t];delete ri[t],e()}},ui=function(t){si.call(t.data)};Zn&&ti||(Zn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ri[++oi]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Dn(oi),oi},ti=function(t){delete ri[t]},"process"==B(ei)?Dn=function(t){ei.nextTick(S(si,t,1))}:ii&&ii.now?Dn=function(t){ii.now(S(si,t,1))}:ni?(Vn=(Un=new ni).port2,Un.port1.onmessage=ui,Dn=S(Vn.postMessage,Vn,1)):$.addEventListener&&"function"==typeof postMessage&&!$.importScripts?(Dn=function(t){$.postMessage(t+"","*")},$.addEventListener("message",ui,!1)):Dn="onreadystatechange"in Z("script")?function(t){Rt.appendChild(Z("script")).onreadystatechange=function(){Rt.removeChild(this),si.call(t)}}:function(t){setTimeout(S(si,t,1),0)});var ai,ci,li,hi={set:Zn,clear:ti},di=hi.set,fi=$.MutationObserver||$.WebKitMutationObserver,pi=$.process,yi=$.Promise,vi="process"==B(pi),gi=function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=E(e),this.reject=E(n)},mi={f:function(t){return new gi(t)}},bi=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},wi=$.navigator,Ei=wi&&wi.userAgent||"",Si=function(t,e,n){for(var i in e)ue(t,i,e[i],n);return t},_i=yt("species"),Bi=function(t){var e=$[t];X&&e&&!e[_i]&&ot.f(e,_i,{configurable:!0,get:function(){return this}})},Oi="Promise",xi=hi.set,Pi=function(){var t,e,n,i=function(){var i,o;for(vi&&(i=pi.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(vi)n=function(){pi.nextTick(i)};else if(!fi||$.navigator&&$.navigator.standalone)if(yi&&yi.resolve){var o=yi.resolve(void 0);n=function(){o.then(i)}}else n=function(){di.call($,i)};else{var r=!0,s=document.createTextNode("");new fi(i).observe(s,{characterData:!0}),n=function(){s.data=r=!r}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),Mi=yt("species"),Ti=se.get,Li=se.set,ji=se.getterFor(Oi),ki=$.Promise,Ai=$.TypeError,Fi=$.document,Ci=$.process,Ri=Ci&&Ci.versions,Ii=Ri&&Ri.v8||"",Di=mi.f,Ui=Di,Vi="process"==B(Ci),Gi=!!(Fi&&Fi.createEvent&&$.dispatchEvent),Ni=!!function(){try{var t=ki.resolve(1),e=function(){},n=(t.constructor={})[Mi]=function(t){t(e,e)};return(Vi||"function"==typeof PromiseRejectionEvent)&&t.then(e)instanceof n&&0!==Ii.indexOf("6.6")&&-1===Ei.indexOf("Chrome/66")}catch(t){}}(),qi=function(t){var e;return!(!F(t)||"function"!=typeof(e=t.then))&&e},Hi=function(t,e,n){if(!e.notified){e.notified=!0;var i=e.reactions;Pi(function(){for(var o=e.value,r=1==e.state,s=0,u=function(n){var i,s,u,a=r?n.ok:n.fail,c=n.resolve,l=n.reject,h=n.domain;try{a?(r||(2===e.rejection&&$i(t,e),e.rejection=1),!0===a?i=o:(h&&h.enter(),i=a(o),h&&(h.exit(),u=!0)),i===n.promise?l(Ai("Promise-chain cycle")):(s=qi(i))?s.call(i,c,l):c(i)):l(o)}catch(t){h&&!u&&h.exit(),l(t)}};i.length>s;)u(i[s++]);e.reactions=[],e.notified=!1,n&&!e.rejection&&zi(t,e)})}},Wi=function(t,e,n){var i,o;Gi?((i=Fi.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),$.dispatchEvent(i)):i={promise:e,reason:n},(o=$["on"+t])?o(i):"unhandledrejection"===t&&function(t,e){var n=$.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},zi=function(t,e){xi.call($,function(){var n,i=e.value,o=Ki(e);if(o&&(n=bi(function(){Vi?Ci.emit("unhandledRejection",i,t):Wi("unhandledrejection",t,i)}),e.rejection=Vi||Ki(e)?2:1),o&&n.e)throw n.v})},Ki=function(t){return 1!==t.rejection&&!t.parent},$i=function(t,e){xi.call($,function(){Vi?Ci.emit("rejectionHandled",t):Wi("rejectionhandled",t,e.value)})},Ji=function(t,e,n,i){return function(o){t(e,n,o,i)}},Xi=function(t,e,n,i){e.done||(e.done=!0,i&&(e=i),e.value=n,e.state=2,Hi(t,e,!0))},Qi=function(t,e,n,i){if(!e.done){e.done=!0,i&&(e=i);try{if(t===n)throw Ai("Promise can't be resolved itself!");var o=qi(n);o?Pi(function(){var i={done:!1};try{o.call(n,Ji(Qi,t,i,e),Ji(Xi,t,i,e))}catch(n){Xi(t,i,n,e)}}):(e.value=n,e.state=1,Hi(t,e,!1))}catch(n){Xi(t,{done:!1},n,e)}}};Ni||(ki=function(t){Gn(this,ki,Oi),E(t),ai.call(this);var e=Ti(this);try{t(Ji(Qi,this,e),Ji(Xi,this,e))}catch(t){Xi(this,e,t)}},(ai=function(t){Li(this,{type:Oi,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Si(ki.prototype,{then:function(t,e){var n,i,o,r=ji(this),s=Di((n=ki,void 0===(o=et(this).constructor)||null==(i=et(o)[Yn])?n:E(i)));return s.ok="function"!=typeof t||t,s.fail="function"==typeof e&&e,s.domain=Vi?Ci.domain:void 0,r.parent=!0,r.reactions.push(s),0!=r.state&&Hi(this,r,!1),s.promise},catch:function(t){return this.then(void 0,t)}}),ci=function(){var t=new ai,e=Ti(t);this.promise=t,this.resolve=Ji(Qi,t,e),this.reject=Ji(Xi,t,e)},mi.f=Di=function(t){return t===ki||t===li?new ci(t):Ui(t)}),be({global:!0,wrap:!0,forced:!Ni},{Promise:ki}),Te(ki,Oi,!1),Bi(Oi),li=$e.Promise,be({target:Oi,stat:!0,forced:!Ni},{reject:function(t){var e=Di(this);return e.reject.call(void 0,t),e.promise}}),be({target:Oi,stat:!0,forced:!Ni},{resolve:function(t){return function(t,e){if(et(t),F(e)&&e.constructor===t)return e;var n=mi.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),be({target:Oi,stat:!0,forced:!(Ni&&Qn(function(t){ki.all(t).catch(function(){})}))},{all:function(t){var e=this,n=Di(e),i=n.resolve,o=n.reject,r=bi(function(){var n=[],r=0,s=1;Jn(t,function(t){var u=r++,a=!1;n.push(void 0),s++,e.resolve(t).then(function(t){a||(a=!0,n[u]=t,--s||i(n))},o)}),--s||i(n)});return r.e&&o(r.v),n.promise},race:function(t){var e=this,n=Di(e),i=n.reject,o=bi(function(){Jn(t,function(t){e.resolve(t).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}});var Yi=!J(function(){return Object.isExtensible(Object.preventExtensions({}))}),Zi=R(function(t){var e=ht("meta"),n=ot.f,i=0,o=Object.isExtensible||function(){return!0},r=function(t){n(t,e,{value:{objectID:"O"+ ++i,weakData:{}}})},s=t.exports={REQUIRED:!1,fastKey:function(t,n){if(!F(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!xt(t,e)){if(!o(t))return"F";if(!n)return"E";r(t)}return t[e].objectID},getWeakData:function(t,n){if(!xt(t,e)){if(!o(t))return!0;if(!n)return!1;r(t)}return t[e].weakData},onFreeze:function(t){return Yi&&s.REQUIRED&&o(t)&&!xt(t,e)&&r(t),t}};Tt[e]=!0}),to=(Zi.REQUIRED,Zi.fastKey,Zi.getWeakData,Zi.onFreeze,ot.f),eo=Zi.fastKey,no=se.set,io=se.getterFor;!function(t,e,n,i,o){var r=$[t],s=r&&r.prototype,u=r,a=i?"set":"add",c={},l=function(t){var e=s[t];ue(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!F(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!F(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!F(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof r&&(o||s.forEach&&!J(function(){(new r).entries().next()}))){var h=new u,d=h[a](o?{}:-0,1)!=h,f=J(function(){h.has(1)}),p=Qn(function(t){new r(t)}),y=!o&&J(function(){for(var t=new r,e=5;e--;)t[a](e,e);return!t.has(-0)});p||((u=e(function(e,n){Gn(e,u,t);var o=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&F(i)&&ke&&ke(t,i),t}(new r,e,u);return null!=n&&Jn(n,o[a],o,i),o})).prototype=s,s.constructor=u),(f||y)&&(l("delete"),l("has"),i&&l("get")),(y||d)&&l(a),o&&s.clear&&delete s.clear}else u=n.getConstructor(e,t,i,a),Zi.REQUIRED=!0;c[t]=u,be({global:!0,forced:u!=r},c),Te(u,t),o||n.setStrong(u,t,i)}("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{getConstructor:function(t,e,n,i){var o=t(function(t,r){Gn(t,o,e),no(t,{type:e,index:Nt(null),first:void 0,last:void 0,size:0}),X||(t.size=0),null!=r&&Jn(r,t[i],t,n)}),r=io(e),s=function(t,e,n){var i,o,s=r(t),a=u(t,e);return a?a.value=n:(s.last=a={index:o=eo(e,!0),key:e,value:n,previous:i=s.last,next:void 0,removed:!1},s.first||(s.first=a),i&&(i.next=a),X?s.size++:t.size++,"F"!==o&&(s.index[o]=a)),t},u=function(t,e){var n,i=r(t),o=eo(e);if("F"!==o)return i.index[o];for(n=i.first;n;n=n.next)if(n.key==e)return n};return Si(o.prototype,{clear:function(){for(var t=r(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,X?t.size=0:this.size=0},delete:function(t){var e=r(this),n=u(this,t);if(n){var i=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),e.first==n&&(e.first=i),e.last==n&&(e.last=o),X?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=r(this),i=S(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),Si(o.prototype,n?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),X&&to(o.prototype,"size",{get:function(){return r(this).size}}),o},setStrong:function(t,e,n){var i=e+" Iterator",o=io(e),r=io(i);Ie(t,e,function(t,e){no(this,{type:i,target:t,state:o(t),kind:e,last:void 0})},function(){for(var t=r(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),Bi(e)}});class oo{constructor(){this._listeners={}}on(t,e,n=0){this._listeners[t]||(this._listeners[t]=[]),e._priority=parseInt(n)||0,-1===this._listeners[t].indexOf(e)&&(this._listeners[t].push(e),this._listeners[t].length>1&&this._listeners[t].sort(this.listenerSorter))}listenerSorter(t,e){return t._priority-e._priority}off(t,e){if(void 0===this._listeners[t])return;if(void 0===e)return void delete this._listeners[t];const n=this._listeners[t].indexOf(e);-1<n&&this._listeners[t].splice(n,1)}trigger(t){if("string"==typeof t&&(t={type:t}),void 0!==this._listeners[t.type])for(let e=this._listeners[t.type].length-1;e>=0;e--)this._listeners[t.type][e](t)}destroy(){this._listeners={}}}class ro{static get webgl(){const t=document.createElement("canvas");return!(!t||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}static get canvas(){const t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}static get webaudio(){return"webkitAudioContext"in window||"AudioContext"in window}static get websockets(){return"WebSocket"in window||"MozWebSocket"in window}static get geolocation(){return"geolocation"in navigator}static get webworkers(){return"function"==typeof Worker}static get touch(){return!!("ontouchstart"in window||navigator.msPointerEnabled&&navigator.msMaxTouchPoints>0||navigator.pointerEnabled&&navigator.maxTouchPoints>0)}static basic(){return ro.canvas?ro.webaudio?null:"Browser does not support WebAudio":"Browser does not support canvas"}static test(t){const e=this.basic();if(e)return e;const n=t.features,i=t.ui,o=t.sizes;for(const t in n)if(void 0!==n[t]&&!ro[t])return"Browser does not support "+t;if(!i.touch&&ro.touch)return"Game does not support touch input";if(!i.mouse&&!ro.touch)return"Game does not support mouse input";const r=Math.max(window.screen.width,window.screen.height);return!o.xsmall&&r<480?"Game doesn't support extra small screens":!o.small&&r<768?"Game doesn't support small screens":!o.medium&&r<992?"Game doesn't support medium screens":!o.large&&r<1200?"Game doesn't support large screens":!o.xlarge&&r>=1200?"Game doesn't support extra large screens":null}static get info(){return`Browser Feature Detection\n\t\t\t\tCanvas support ${ro.canvas?"✓":"×"}\n\t\t\t\tWebGL support ${ro.webgl?"✓":"×"}\n\t\t\t\tWebAudio support ${ro.webAudio?"✓":"×"}`}}var so="2.0.0";let uo=[];const ao=new class extends oo{constructor(t=100*Math.random()|0){super(),this.id=`BELLHOP:${t}`,this.connected=!1,this.isChild=!0,this.connecting=!1,this.origin="*",this._sendLater=[],this.iframe=null}receive(t){this.target===t.source&&("connected"===t.data?this.onConnectionReceived(t.data):this.connected&&"object"==typeof t.data&&t.data.type&&this.trigger(t.data))}onConnectionReceived(t){this.connecting=!1,this.connected=!0,this.trigger("connected"),this.isChild||this.target.postMessage(t,this.origin);for(let t=0,e=this._sendLater.length;t<e;t++){const{type:e,data:n}=this._sendLater[t];this.send(e,n)}this._sendLater.length=0}connect(t,e="*"){this.connecting||(this.disconnect(),this.connecting=!0,t instanceof HTMLIFrameElement&&(this.iframe=t),this.isChild=void 0===t,this.supported=!0,this.isChild&&(this.supported=window!=t),this.origin=e,window.addEventListener("message",this.receive.bind(this)),this.isChild&&(window===this.target?this.trigger("failed"):this.target.postMessage("connected",this.origin)))}disconnect(){this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener("message",this.receive)}send(t,e={}){if("string"!=typeof t)throw"The event type must be a string";const n={type:t,data:e};this.connecting?this._sendLater.push(n):this.target.postMessage(n,this.origin)}fetch(t,e,n={},i=!1){if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";const o=t=>{i&&this.off(t.type,o),e(t)};this.on(t,o),this.send(t,n)}respond(t,e={},n=!1){const i=o=>{n&&this.off(o.type,i),this.send(t,e)};this.on(t,i)}destroy(){super.destroy(),this.disconnect(),this._sendLater.length=0}get target(){return this.isChild?window.parent:this.iframe.contentWindow}};class co{constructor(t){if(this.main=document.querySelector(t),co.sortPlugins(),null===this.main)throw new Error("No iframe was found with the provided selector");this.dom=this.main,this.loaded=!1,this.loading=!1,this.release=null,this.plugins=co.plugins,this.plugins.forEach(t=>t.setup(this)),this.preload()}onLoading(){this.client.trigger("opening")}onProgress(){this.client.trigger("progress")}onLoadDone(){this.loading=!1,this.loaded=!0,this.main.classList.remove("loading"),this.plugins.forEach(t=>t.opened(this)),this.client.trigger("opened")}onEndGame(){this.reset()}onLocalError(t){this.client.trigger(t.type)}reset(){const t=this.loaded||this.loading;t&&this.plugins.slice().reverse().forEach(t=>t.closed(this)),t&&this.client.trigger("closed"),this.loaded=!1,this.loading=!1,this.main.setAttribute("src",""),this.main.classList.remove("loading")}initClient(){this.client.connect(this.dom),this.client.on("loading",this.onLoading.bind(this)),this.client.on("progress",this.onProgress.bind(this)),this.client.on("loaded",this.onLoadDone.bind(this)),this.client.on("endGame",this.onEndGame.bind(this)),this.client.on("localError",this.onLocalError.bind(this))}_onCloseFailed(){this.reset()}_internalOpen(t,{singlePlay:e=!1,playOptions:n=null}={}){const i={singlePlay:e,playOptions:n};this.reset(),this.loading=!0,this.initClient();const o=ro.basic();o&&(console.error("ERROR:",o),this.client.trigger("unsupported")),this.plugins.forEach(t=>t.open(this));let r=t;if(null!==i.playOptions){const e="playOptions="+encodeURIComponent(JSON.stringify(i.playOptions));r=-1===t.indexOf("?")?`${t}?${e}`:`${t}&${e}`}this.main.classList.add("loading"),this.main.setAttribute("src",r),this.client.respond("singlePlay",{singlePlay:e}),this.client.respond("playOptions",{playOptions:n}),this.client.trigger("open")}openPath(t,e={},n={}){"object"!=typeof e&&(console.warn("SpringRoll Container.openPath was passed a invalid options parameter. Using default parameters instead"),e={}),this._internalOpen(t,Object.assign({singlePlay:!1,playOptions:n},e))}openRemote(t,{query:e="",singlePlay:n=!1}={},i=null){this.release=null,fetch(t,{headers:{"Content-Type":"application/json"}}).then(t=>{200===t.status&&t.json().then(t=>{const o=t.data;if(console.log(t),ro.test(o.capabilities))return this.client.trigger("unsupported");this.release=o,this._internalOpen(o.url+e,{singlePlay:n,playOptions:i})})})}destroy(){this.reset(),this.plugins.slice().reverse().forEach(t=>t.teardown(this)),this.main=null,this.options=null,this.dom=null,this.release=null}close(){this.loading||this.loaded?(this.plugins.forEach(t=>t.close(this)),this.client.trigger("close"),this.client.send("close")):this.reset()}preload(){const t=Promise.resolve();this.plugins.forEach(e=>t.then(()=>e.preload())),t.then(()=>this.client.send("plugins loaded")).catch(t=>console.error("SpringRoll Container Plugin Preloader error: ",t))}static get version(){return so}static uses(t){uo.push(t)}static get plugins(){return uo}static clearPlugins(){return uo=[]}static get client(){return ao}get client(){return co.client}static sortPlugins(){if(0===uo.length)return;const t=uo.map(t=>t.name),e={};uo.forEach(n=>{const i=n.optional.filter(e=>-1!==t.indexOf(e));e[n.name]={plugin:n,name:n.name,dependencies:[].concat(n.required).concat(i)}});const n=[],i=new Set;if(Object.keys(e).map(t=>e[t]).filter(t=>0===t.dependencies.length).forEach(t=>i.add(t.name)),0===i.size)throw new Error("Every registered plugin has a dependency!");for(;i.size>0;){const t=i.values().next().value;i.delete(t),n.push(t),Object.keys(e).forEach(o=>{const r=e[o].dependencies.indexOf(t);r>-1&&e[o].dependencies.splice(r,1),0===e[o].dependencies.length&&-1===n.indexOf(o)&&i.add(o)})}if(Object.keys(e).filter(t=>e[t].dependencies.length>0).length>0)throw new Error("Dependency graph has a cycle");uo=[],n.forEach(t=>{uo.push(e[t].plugin)})}}class lo{constructor(t=function(){},e=function(){}){this._onFocus=t,this._onBlur=e,this.onFocus=function(){this.enabled&&this._onFocus()}.bind(this),this.onBlur=function(){this.enabled&&this._onBlur()}.bind(this),this._enabled=!1,this.enabled=!0}destroy(){this.enabled=!1,this.onToggle=null,this.onFocus=null,this.onBlur=null}onToggle(t){this.enabled&&(document.hidden?this.onBlur(t):this.onFocus(t))}get enabled(){return this._enabled}set enabled(t){this._enabled=t,window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),window.removeEventListener("pagehide",this.onBlur),window.removeEventListener("pageshow",this.onFocus),window.removeEventListener("visibilitychange",this.onToggle.bind(this)),this._enabled&&(window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),window.addEventListener("pagehide",this.onBlur),window.addEventListener("pageshow",this.onFocus),window.addEventListener("visibilitychange",this.onToggle.bind(this)))}}let ho=(()=>{if("undefined"==typeof Storage)return!1;try{return localStorage.setItem("LS_TEST","test"),localStorage.removeItem("LS_TEST"),!0}catch(t){return!1}})(),fo=!1;class po{static get WEB_STORAGE_SUPPORT(){return ho}static disableWebStorage(){ho=!1}static get ERASE_COOKIE(){return fo}static set ERASE_COOKIE(t){fo=t}static remove(t){this.WEB_STORAGE_SUPPORT?(localStorage.removeItem(t),sessionStorage.removeItem(t)):po.write(t,"",this.ERASE_COOKIE)}static write(t,e,n=!1){if(this.WEB_STORAGE_SUPPORT)return void(n?sessionStorage.setItem(t,JSON.stringify(e)):localStorage.setItem(t,JSON.stringify(e)));const i=n?n!==this.ERASE_COOKIE?"":"; expires=Thu, 01 Jan 1970 00:00:00 GMT":"; expires="+new Date(2147483646e3).toUTCString();document.cookie=t+"="+escape(JSON.stringify(e))+i+"; path=/"}static read(t){if(!this.WEB_STORAGE_SUPPORT){const e=`${t}=`,n=document.cookie.split(";");for(let t=0,i=n.length;t<i;t++){let i=n[t];for(;" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return JSON.parse(unescape(i.substring(e.length,i.length)))}return null}const e=localStorage.getItem(t)||sessionStorage.getItem(t);return JSON.parse(e)||null}}class yo{constructor(t,e=[],n=[]){this.name=t,this.required=Array.isArray(e)?e:[],this.optional=Array.isArray(n)?n:[]}preload(t){return Promise.resolve()}setup(t){}open(t){}opened(t){}close(t){}closed(t){}teardown(t){}sendProperty(t,e){po.write(t,e),this.client.send(t,e)}get client(){return co.client}}class vo extends yo{constructor(t,e=[],n=[]){super(t,e,n),this.sendMutes=!1}setup(t){this.sendMutes=!0}teardown(t){this.reset()}_disableButton(t){t instanceof HTMLButtonElement&&(t.classList.remove("enabled"),t.classList.add("disabled"))}reset(){this.sendMutes=!1}_setMuteProp(t,e,n){Array.isArray(e)?e.forEach(t=>this.removeListeners(t)):this.removeListeners(e),this.sendProperty(t,n)}removeListeners(t){t instanceof HTMLElement&&(t.classList.remove("unmuted"),t.classList.remove("muted"),t.classList.add(this.sendMutes?"muted":"unmuted"))}}const go="captionsStyles",mo="captionsMuted",bo={size:"md",background:"black-semi",color:"white",edge:"none",font:"arial",align:"top"};class wo{static remove(t,e){po.remove(t),e()}static write(t,e,n){po.write(t,e),n()}static read(t,e){e(po.read(t))}}t.Container=co,t.Features=ro,t.PageVisibility=lo,t.BasePlugin=yo,t.ButtonPlugin=vo,t.CaptionsPlugin=class extends vo{constructor(t){super("Caption-Button-Plugin"),this.captionsStyles=Object.assign({},bo,po.read(go)||{}),this.captionsButton=document.querySelector(t),this.captionsButton?(this.captionsButton.addEventListener("click",this.captionsButtonClick.bind(this)),this.client.on("features",function(t){this.captionsButton.style.display=t.data.captions?"inline-block":"none"}.bind(this)),null===po.read(mo)&&(this.captionsMuted=!0)):console.warn("SpringRollContainer: CaptionPlugin was not provided a button element")}captionsButtonClick(){this.captionsMuted=!this.captionsMuted}clearCaptionsStyles(){this.captionsStyles=Object.assign({},bo),this.setCaptionsStyles()}getCaptionsStyles(t){return t?this.captionsStyles[t]:this.captionsStyles}setCaptionsStyles(t=bo,e=""){"object"==typeof t?Object.assign(this.captionsStyles,t):"string"==typeof t&&(this.captionsStyles[t]=e),po.write(go,this.captionsStyles),this.client&&this.client.send(go,this.captionsStyles)}opened(){null!==this.captionsButton&&(this.captionsButton.classList.remove("disabled"),this.captionsMuted=!!po.read(mo),this.setCaptionsStyles(po.read(go)))}teardown(){null!==this.captionsButton&&this.captionsButton.removeEventListener("click",this.captionsButtonClick.bind(this))}close(){null!==this.captionsButton&&super._disableButton(this.captionsButton)}},t.HelpPlugin=class extends vo{constructor(t){super("Help-Button-Plugin"),this.helpButton=document.querySelector(t),this.paused=!1,this._helpEnabled=!1,this.helpButton instanceof HTMLElement&&(this.helpButton.addEventListener("click",this.helpButtonClick.bind(this)),this.client.on("pause",function(t){t&&!this.helpButton.classList.contains("disabled")?(this.helpButton.setAttribute("data-paused",!0),this.helpEnabled=!1):this.helpButton.getAttribute("data-paused")&&(this.helpButton.setAttribute("data-paused",""),this.helpEnabled=!0)}.bind(this)),this.client.on("features",function(t){this.helpButton.style.display=t.hints?"inline-block":"none",this.helpButton.style.display="none"}.bind(this)))}helpButtonClick(){this.paused||this.helpButton.classList.contains("disabled")||this.client.send("playHelp")}teardown(){this.helpButton.removeEventListener("click",this.helpButtonClick.bind(this))}close(){this.client.off("helpEnabled"),this.helpEnabled=!1}open(){this.client.on("helpEnabled",function(t){this.helpEnabled=!!t.data}.bind(this))}get helpEnabled(){return this._helpEnabled}set helpEnabled(t){this._helpEnabled=t,this.helpButton.classList.remove("disabled"),this.helpButton.classList.remove("enabled"),this.helpButton.classList.add(t?"enabled":"disabled"),this.client.trigger("helpEnabled")}},t.PausePlugin=class extends vo{constructor(t,e=".pause-on-focus"){if(super("Pause-Button-plugin"),this._appBlurred=!1,this._containerBlurred=!1,this._focusTimer=null,this._isManualPause=!1,this._keepFocus=!1,this._paused=!1,this.dom=null,this.focus=this.focus.bind(this),this.manageFocus=this.manageFocus.bind(this),this.onKeepFocus=this.onKeepFocus.bind(this),this.onPauseFocus=this.onPauseFocus.bind(this),this.paused=!1,this.pauseDisabled=!1,this.pageVisibility=new lo(this.onContainerFocus.bind(this),this.onContainerBlur.bind(this)),this.client.on("features",function(t){console.log("hello !+!@?!@",t),t.disablePause&&(this.pauseDisabled=!0)}.bind(this)),document.addEventListener("focus",this.focus),document.addEventListener("click",this.focus),this.pauseButton=document.querySelectorAll(t),0<this.pauseButton.length){const t=this.onPauseToggle.bind(this);this.pauseButton.forEach(e=>e.addEventListener("click",t))}this.pauseFocus=document.querySelector(e),null!==this.pauseFocus&&(console.log("hello"),this.pauseFocus.addEventListener("focus",this.onPauseFocus))}onPauseToggle(){this.pause=!this._paused,this._isManualPause=this.paused}opened(){this.pauseButton.forEach(t=>t.classList.remove("disabled")),this.pause=this._paused,this.focus()}close(){this.pauseButton.forEach(t=>this._disableButton.bind(t)),this.paused=!1,this._focusTimer&&clearTimeout(this._focusTimer)}teardown(){super.reset();const t=this.onPauseToggle.bind(this);this.pauseButton.forEach(e=>e.removeEventListener("click",t)),null!==this.pauseFocus&&this.pauseFocus.removeEventListener("focus",this.onPauseFocus),document.removeEventListener("focus",this.focus),document.removeEventListener("click",this.focus),this.pageVisibility&&this.pageVisibility.destroy()}set pause(t){t=!!t,this.pauseDisabled||(this._paused=t,this.client.send("pause",t),this.client.trigger(t?"paused":"resumed"),this.pauseButton.forEach(e=>{e.classList.remove("unpaused"),e.classList.remove("paused"),e.classList.add(t?"paused":"unpaused")}))}get pause(){return this._paused}setup({dom:t}){super.setup(),this.dom=t}open(){this.client.on("focus",this.onFocus.bind(this)),this.client.on("keepFocus",this.onKeepFocus.bind(this))}onPauseFocus(){this._isManualPause=this.paused=!0,this.pauseFocus.addEventListener("blur",function(){console.log("hello!?",this),this._isManualPause=this.paused=!1,this.focus()}.bind(this),{once:!0})}focus(){this.dom.contentWindow&&this.dom.contentWindow.focus()}blur(){this.dom.contentWindow&&this.dom.contentWindow.blur()}manageFocus(){this._keepFocus&&this.blur(),this._focusTimer&&clearTimeout(this._focusTimer),this._focusTimer=setTimeout(function(){this._focusTimer=null,this._isManualPause||(this.paused=Boolean(this._containerBlurred&&this._appBlurred),this._keepFocus&&!this._containerBlurred&&this._appBlurred&&this.focus())}.bind(this),100)}onKeepFocus(t){this._keepFocus=!!t.data,this.manageFocus()}onFocus(t){this._appBlurred=!t.data,this.manageFocus()}onContainerFocus(){this._containerBlurred=!1,this.manageFocus()}onContainerBlur(){this._containerBlurred=this._appBlurred=!0,this.manageFocus()}},t.SoundPlugin=class extends vo{constructor({soundButton:t,musicButton:e,sfxButton:n,voButton:i,soundSlider:o,musicSlider:r,sfxSlider:s,voSlider:u}={}){super("Sound-Button-Plugin");const a=po.read("soundMuted");this._soundMuted=a||!1,this._musicMuted=!1,this._voMuted=!1,this._sfxMuted=!1,this.soundVolume=0,this.musicVolume=0,this.sfxVolume=0,this.voVolume=0,this.soundSlider=this.sliderSetup(document.querySelector(o)),this.musicSlider=this.sliderSetup(document.querySelector(r)),this.sfxSlider=this.sliderSetup(document.querySelector(s)),this.voSlider=this.sliderSetup(document.querySelector(u)),this.soundButton=document.querySelector(t),this.musicButton=document.querySelector(e),this.sfxButton=document.querySelector(n),this.voButton=document.querySelector(i),this.soundButton&&this.soundButton.addEventListener("click",this.onSoundToggle.bind(this)),this.musicButton&&this.musicButton.addEventListener("click",this.onMusicToggle.bind(this)),this.sfxButton&&this.sfxButton.addEventListener("click",this.onSFXToggle.bind(this)),this.voButton&&this.voButton.addEventListener("click",this.onVOToggle.bind(this)),this.soundSlider&&this.soundSlider.addEventListener("change",this.onSoundVolumeChange.bind(this)),this.musicSlider&&this.musicSlider.addEventListener("change",this.onMusicVolumeChange.bind(this)),this.sfxSlider&&this.sfxSlider.addEventListener("change",this.onSfxVolumeChange.bind(this)),this.voSlider&&this.voSlider.addEventListener("change",this.onVoVolumeChange.bind(this)),this.client.on("features",function(t){this.voButton instanceof HTMLElement&&(this.voButton.style.display=t.data.vo&&this.voButton?"inline-block":"none"),this.musicButton instanceof HTMLElement&&(this.musicButton.style.display=t.data.music&&this.musicButton?"inline-block":"none"),this.soundButton instanceof HTMLElement&&(this.soundButton.style.display=t.data.sound&&this.soundButton?"inline-block":"none"),this.sfxButton instanceof HTMLElement&&(this.sfxButton.style.display=t.data.sfxButton&&this.sfxButton?"inline-block":"none")}.bind(this))}onSoundVolumeChange(){this.soundVolume=this.volumeRange(Number(this.soundSlider.value)),this.soundMuted=!this.soundVolume,this._checkSoundMute(),this.sendProperty("soundVolume",this.soundVolume)}onMusicVolumeChange(){this.musicVolume=this.volumeRange(Number(this.musicSlider.value)),this.musicMuted=!this.musicVolume,this._checkSoundMute(),this.sendProperty("musicVolume",this.musicVolume)}onVoVolumeChange(){this.voVolume=this.volumeRange(Number(this.voSlider.value)),this.voMuted=!this.voVolume,this._checkSoundMute(),this.sendProperty("voVolume",this.voVolume)}onSfxVolumeChange(){this.sfxVolume=this.volumeRange(Number(this.sfxSlider.value)),this.sfxMuted=!this.sfxVolume,this._checkSoundMute(),this.sendProperty("sfxVolume",this.sfxVolume)}onSoundToggle(){const t=!this.soundMuted;this.soundMuted=t,this.musicMuted=t,this.voMuted=t,this.sfxMuted=t}onMusicToggle(){this.musicMuted=!this.musicMuted,this._checkSoundMute()}onVOToggle(){this.voMuted=!this.voMuted,this._checkSoundMute()}onSFXToggle(){this.sfxMuted=!this.sfxMuted,this._checkSoundMute()}_checkSoundMute(){this.soundMuted=this.sfxMuted&&this.voMuted&&this.musicMuted}setMuteProp(t,e,n){this[t]=e,this._setMuteProp(t,n,e)}opened(){null!==this.soundButton&&this.soundButton.classList.remove("disabled"),null!==this.sfxButton&&this.sfxButton.classList.remove("disabled"),null!==this.voButton&&this.voButton.classList.remove("disabled"),null!==this.musicButton&&this.musicButton.classList.remove("disabled"),this.soundMuted=!!po.read("soundMuted"),this.musicMuted=!!po.read("musicMuted"),this.sfxMuted=!!po.read("sfxMuted"),this.voMuted=!!po.read("voMuted")}close(){this._disableButton(this.soundButton),this._disableButton(this.voButton),this._disableButton(this.sfxButton),this._disableButton(this.musicButton)}teardown(){null!==this.soundButton&&this.soundButton.removeEventListener("click",this.onSoundToggle.bind(this)),null!==this.musicButton&&this.musicButton.removeEventListener("click",this.onMusicToggle.bind(this)),null!==this.sfxButton&&this.sfxButton.removeEventListener("click",this.onSFXToggle.bind(this)),null!==this.voButton&&this.voButton.removeEventListener("click",this.onVOToggle.bind(this))}sliderSetup(t){return t&&"range"===t.type?(t.min="0",t.max="1",t.step="0.1",t):null}volumeRange(t,e=0,n=1){return t<e?e:t>n?n:t}set soundMuted(t){this.setMuteProp("_soundMuted",t,this.soundButton)}get soundMuted(){return this._soundMuted}set voMuted(t){this.setMuteProp("_voMuted",t,this.voButton)}get voMuted(){return this._voMuted}set musicMuted(t){this.setMuteProp("_musicMuted",t,this.musicButton)}get musicMuted(){return this._musicMuted}set sfxMuted(t){this.setMuteProp("_sfxMuted",t,this.sfxButton)}get sfxMuted(){return this._sfxMuted}},t.UserDataPlugin=class extends yo{constructor(){super("UserData-Plugin")}open(){this.client.on("userDataRemove",this.onUserDataRemove.bind(this)),this.client.on("userDataRead",this.onUserDataRead.bind(this)),this.client.on("userDataWrite",this.onUserDataWrite.bind(this))}onUserDataRemove({data:t,type:e}){wo.remove(t,()=>{this.client.send(e)})}onUserDataRead({data:t,type:e}){wo.read(t,t=>this.client.send(e,t))}onUserDataWrite({data:{name:t,value:e,type:n}}){wo.write(t,e,()=>this.client.send(n))}},t.SavedData=po,t.SavedDataHandler=wo,Object.defineProperty(t,"__esModule",{value:!0})});

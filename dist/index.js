import 'core-js/modules/es6.object.assign';import 'core-js/modules/es6.string.small';import 'core-js/modules/es6.function.name';import 'core-js/modules/es6.array.find';import 'core-js/modules/es6.promise';import 'core-js/modules/web.dom.iterable';import 'core-js/modules/es6.array.iterator';import 'core-js/modules/es6.object.to-string';import 'core-js/modules/es6.string.iterator';import 'core-js/modules/es6.regexp.to-string';import 'core-js/modules/es6.number.constructor';import 'core-js/modules/es7.array.includes';import 'core-js/modules/es6.string.includes';import 'core-js/modules/es6.object.keys';const t={searchParams:'URLSearchParams'in self,iterable:'Symbol'in self&&'iterator'in Symbol,blob:'FileReader'in self&&'Blob'in self&&function() {try {return new Blob,!0;} catch (t) {return !1;}}(),formData:'FormData'in self,arrayBuffer:'ArrayBuffer'in self};if (t.arrayBuffer) {var e=['[object Int8Array]','[object Uint8Array]','[object Uint8ClampedArray]','[object Int16Array]','[object Uint16Array]','[object Int32Array]','[object Uint32Array]','[object Float32Array]','[object Float64Array]'],n=ArrayBuffer.isView||function(t) {return t&&e.indexOf(Object.prototype.toString.call(t))>-1;};} function i(t) {if ('string'!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t)) {throw new TypeError('Invalid character in header field name');} return t.toLowerCase();} function o(t) {return 'string'!=typeof t&&(t=String(t)),t;} function r(e) {const n={next:function() {const t=e.shift();return {done:void 0===t,value:t};}};return t.iterable&&(n[Symbol.iterator]=function() {return n;}),n;} function s(t) {this.map={},t instanceof s?t.forEach(function(t,e) {this.append(e,t);},this):Array.isArray(t)?t.forEach(function(t) {this.append(t[0],t[1]);},this):t&&Object.getOwnPropertyNames(t).forEach(function(e) {this.append(e,t[e]);},this);} function u(t) {if (t.bodyUsed) {return Promise.reject(new TypeError('Already read'));}t.bodyUsed=!0;} function a(t) {return new Promise(function(e,n) {t.onload=function() {e(t.result);},t.onerror=function() {n(t.error);};});} function l(t) {const e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n;} function c(t) {if (t.slice) {return t.slice(0);} const e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer;} function h() {return this.bodyUsed=!1,this._initBody=function(e) {let i;this._bodyInit=e,e?'string'==typeof e?this._bodyText=e:t.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:t.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():t.arrayBuffer&&t.blob&&((i=e)&&DataView.prototype.isPrototypeOf(i))?(this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||n(e))?this._bodyArrayBuffer=c(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText='',this.headers.get('content-type')||('string'==typeof e?this.headers.set('content-type','text/plain;charset=UTF-8'):this._bodyBlob&&this._bodyBlob.type?this.headers.set('content-type',this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8'));},t.blob&&(this.blob=function() {const t=u(this);if (t) {return t;} if (this._bodyBlob) {return Promise.resolve(this._bodyBlob);} if (this._bodyArrayBuffer) {return Promise.resolve(new Blob([this._bodyArrayBuffer]));} if (this._bodyFormData) {throw new Error('could not read FormData body as blob');} return Promise.resolve(new Blob([this._bodyText]));},this.arrayBuffer=function() {return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l);}),this.text=function() {let t,e,n,i=u(this);if (i) {return i;} if (this._bodyBlob) {return t=this._bodyBlob,e=new FileReader,n=a(e),e.readAsText(t),n;} if (this._bodyArrayBuffer) {return Promise.resolve(function(t) {for (var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++) {n[i]=String.fromCharCode(e[i]);} return n.join('');}(this._bodyArrayBuffer));} if (this._bodyFormData) {throw new Error('could not read FormData body as text');} return Promise.resolve(this._bodyText);},t.formData&&(this.formData=function() {return this.text().then(p);}),this.json=function() {return this.text().then(JSON.parse);},this;}s.prototype.append=function(t,e) {t=i(t),e=o(e);const n=this.map[t];this.map[t]=n?n+', '+e:e;},s.prototype.delete=function(t) {delete this.map[i(t)];},s.prototype.get=function(t) {return t=i(t),this.has(t)?this.map[t]:null;},s.prototype.has=function(t) {return this.map.hasOwnProperty(i(t));},s.prototype.set=function(t,e) {this.map[i(t)]=o(e);},s.prototype.forEach=function(t,e) {for (const n in this.map) {this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this);}},s.prototype.keys=function() {const t=[];return this.forEach(function(e,n) {t.push(n);}),r(t);},s.prototype.values=function() {const t=[];return this.forEach(function(e) {t.push(e);}),r(t);},s.prototype.entries=function() {const t=[];return this.forEach(function(e,n) {t.push([n,e]);}),r(t);},t.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);const d=['DELETE','GET','HEAD','OPTIONS','POST','PUT'];function f(t,e) {let n,i,o=(e=e||{}).body;if (t instanceof f) {if (t.bodyUsed) {throw new TypeError('Already read');} this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0);} else {this.url=String(t);} if (this.credentials=e.credentials||this.credentials||'same-origin',!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||'GET',i=n.toUpperCase(),d.indexOf(i)>-1?i:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,('GET'===this.method||'HEAD'===this.method)&&o) {throw new TypeError('Body not allowed for GET or HEAD requests');} this._initBody(o);} function p(t) {const e=new FormData;return t.trim().split('&').forEach(function(t) {if (t) {const n=t.split('='),i=n.shift().replace(/\+/g,' '),o=n.join('=').replace(/\+/g,' ');e.append(decodeURIComponent(i),decodeURIComponent(o));}}),e;} function y(t,e) {e||(e={}),this.type='default',this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText='statusText'in e?e.statusText:'OK',this.headers=new s(e.headers),this.url=e.url||'',this._initBody(t);}f.prototype.clone=function() {return new f(this,{body:this._bodyInit});},h.call(f.prototype),h.call(y.prototype),y.prototype.clone=function() {return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url});},y.error=function() {const t=new y(null,{status:0,statusText:''});return t.type='error',t;};const v=[301,302,303,307,308];y.redirect=function(t,e) {if (-1===v.indexOf(e)) {throw new RangeError('Invalid status code');} return new y(null,{status:e,headers:{location:t}});};let g=self.DOMException;try {new g;} catch (t) {(g=function(t,e) {this.message=t,this.name=e;const n=Error(t);this.stack=n.stack;}).prototype=Object.create(Error.prototype),g.prototype.constructor=g;} function m(e,n) {return new Promise(function(i,o) {const r=new f(e,n);if (r.signal&&r.signal.aborted) {return o(new g('Aborted','AbortError'));} const u=new XMLHttpRequest;function a() {u.abort();}u.onload=function() {let t,e,n={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||'',e=new s,t.replace(/\r?\n[\t ]+/g,' ').split(/\r?\n/).forEach(function(t) {const n=t.split(':'),i=n.shift().trim();if (i) {const o=n.join(':').trim();e.append(i,o);}}),e)};n.url='responseURL'in u?u.responseURL:n.headers.get('X-Request-URL');const o='response'in u?u.response:u.responseText;i(new y(o,n));},u.onerror=function() {o(new TypeError('Network request failed'));},u.ontimeout=function() {o(new TypeError('Network request failed'));},u.onabort=function() {o(new g('Aborted','AbortError'));},u.open(r.method,r.url,!0),'include'===r.credentials?u.withCredentials=!0:'omit'===r.credentials&&(u.withCredentials=!1),'responseType'in u&&t.blob&&(u.responseType='blob'),r.headers.forEach(function(t,e) {u.setRequestHeader(e,t);}),r.signal&&(r.signal.addEventListener('abort',a),u.onreadystatechange=function() {4===u.readyState&&r.signal.removeEventListener('abort',a);}),u.send(void 0===r._bodyInit?null:r._bodyInit);});}m.polyfill=!0,self.fetch||(self.fetch=m,self.Headers=s,self.Request=f,self.Response=y);const b={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},w=function(t,e,n) {if (function(t) {if ('function'!=typeof t) {throw TypeError(String(t)+' is not a function');}}(t),void 0===e) {return t;} switch (n) {case 0:return function() {return t.call(e);};case 1:return function(n) {return t.call(e,n);};case 2:return function(n,i) {return t.call(e,n,i);};case 3:return function(n,i,o) {return t.call(e,n,i,o);};} return function() {return t.apply(e,arguments);};},S=function(t) {try {return !!t();} catch (t) {return !0;}},k={}.toString,_=function(t) {return k.call(t).slice(8,-1);},P=''.split,E=S(function() {return !Object('z').propertyIsEnumerable(0);})?function(t) {return 'String'==_(t)?P.call(t,''):Object(t);}:Object,B=function(t) {if (null==t) {throw TypeError('Can\'t call method on '+t);} return t;},x=function(t) {return Object(B(t));},L=Math.ceil,M=Math.floor,C=function(t) {return isNaN(t=+t)?0:(t>0?M:L)(t);},O=Math.min,A=function(t) {return t>0?O(C(t),9007199254740991):0;},T=function(t) {return 'object'==typeof t?null!==t:'function'==typeof t;},j=Array.isArray||function(t) {return 'Array'==_(t);};function V(t,e) {return t(e={exports:{}},e.exports),e.exports;} let K,F,D,R,I,N,G,U,z,H='object'==typeof window&&window&&window.Math==Math?window:'object'==typeof self&&self&&self.Math==Math?self:Function('return this')(),q=!S(function() {return 7!=Object.defineProperty({},'a',{get:function() {return 7;}}).a;}),W=H.document,J=T(W)&&T(W.createElement),Y=function(t) {return J?W.createElement(t):{};},X=!q&&!S(function() {return 7!=Object.defineProperty(Y('div'),'a',{get:function() {return 7;}}).a;}),$=function(t) {if (!T(t)) {throw TypeError(String(t)+' is not an object');} return t;},Q=function(t,e) {if (!T(t)) {return t;} let n,i;if (e&&'function'==typeof(n=t.toString)&&!T(i=n.call(t))) {return i;} if ('function'==typeof(n=t.valueOf)&&!T(i=n.call(t))) {return i;} if (!e&&'function'==typeof(n=t.toString)&&!T(i=n.call(t))) {return i;} throw TypeError('Can\'t convert object to primitive value');},Z=Object.defineProperty,tt={f:q?Z:function(t,e,n) {if ($(t),e=Q(e,!0),$(n),X) {try {return Z(t,e,n);} catch (t) {}} if ('get'in n||'set'in n) {throw TypeError('Accessors not supported');} return 'value'in n&&(t[e]=n.value),t;}},et=function(t,e) {return {enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e};},nt=q?function(t,e,n) {return tt.f(t,e,et(1,n));}:function(t,e,n) {return t[e]=n,t;},it=function(t,e) {try {nt(H,t,e);} catch (n) {H[t]=e;} return e;},ot=V(function(t) {const e=H['__core-js_shared__']||it('__core-js_shared__',{});(t.exports=function(t,n) {return e[t]||(e[t]=void 0!==n?n:{});})('versions',[]).push({version:'3.0.1',mode:'global',copyright:'© 2019 Denis Pushkarev (zloirock.ru)'});}),rt=0,st=Math.random(),ut=function(t) {return 'Symbol('.concat(void 0===t?'':t,')_',(++rt+st).toString(36));},at=!S(function() {return !String(Symbol());}),lt=ot('wks'),ct=H.Symbol,ht=function(t) {return lt[t]||(lt[t]=at&&ct[t]||(at?ct:ut)('Symbol.'+t));},dt=ht('species'),ft=[].forEach,pt=(D=1==(K=0),R=2==K,I=3==K,N=4==K,G=6==K,U=5==K||G,z=F||function(t,e) {let n;return j(t)&&('function'!=typeof(n=t.constructor)||n!==Array&&!j(n.prototype)?T(n)&&null===(n=n[dt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e);},function(t,e,n) {for (var i,o,r=x(t),s=E(r),u=w(e,n,3),a=A(s.length),l=0,c=D?z(t,a):R?z(t,0):void 0;a>l;l++) {if ((U||l in s)&&(o=u(i=s[l],l,r),K)) {if (D) {c[l]=o;} else if (o) {switch (K) {case 3:return !0;case 5:return i;case 6:return l;case 2:c.push(i);}} else if (N) {return !1;}}} return G?-1:I||N?N:c;}),yt=function(t,e) {const n=[][t];return !n||!S(function() {n.call(null,e||function() {throw 1;},1);});}('forEach')?function(t) {return pt(this,t,arguments[1]);}:ft;for (const vt in b) {const gt=H[vt],mt=gt&&gt.prototype;if (mt&&mt.forEach!==yt) {try {nt(mt,'forEach',yt);} catch (t) {mt.forEach=yt;}}} var bt,wt=function(t) {return E(B(t));},St={}.hasOwnProperty,kt=function(t,e) {return St.call(t,e);},_t=Math.max,Pt=Math.min,Et={},Bt=(bt=!1,function(t,e,n) {let i,o=wt(t),r=A(o.length),s=function(t,e) {const n=C(t);return n<0?_t(n+e,0):Pt(n,e);}(n,r);if (bt&&e!=e) {for (;r>s;) {if ((i=o[s++])!=i) {return !0;}}} else {for (;r>s;s++) {if ((bt||s in o)&&o[s]===e) {return bt||s||0;}}} return !bt&&-1;}),xt=function(t,e) {let n,i=wt(t),o=0,r=[];for (n in i) {!kt(Et,n)&&kt(i,n)&&r.push(n);} for (;e.length>o;) {kt(i,n=e[o++])&&(~Bt(r,n)||r.push(n));} return r;},Lt=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'],Mt=Object.keys||function(t) {return xt(t,Lt);},Ct=q?Object.defineProperties:function(t,e) {$(t);for (var n,i=Mt(e),o=i.length,r=0;o>r;) {tt.f(t,n=i[r++],e[n]);} return t;},Ot=H.document,At=Ot&&Ot.documentElement,Tt=ot('keys'),jt=function(t) {return Tt[t]||(Tt[t]=ut(t));},Vt=jt('IE_PROTO'),Kt=function() {},Ft=function() {let t,e=Y('iframe'),n=Lt.length;for (e.style.display='none',At.appendChild(e),e.src=String('javascript:'),(t=e.contentWindow.document).open(),t.write('<script>document.F=Object<\/script>'),t.close(),Ft=t.F;n--;) {delete Ft.prototype[Lt[n]];} return Ft();},Dt=Object.create||function(t,e) {let n;return null!==t?(Kt.prototype=$(t),n=new Kt,Kt.prototype=null,n[Vt]=t):n=Ft(),void 0===e?n:Ct(n,e);};Et[Vt]=!0;const Rt=ht('unscopables'),It=Array.prototype;null==It[Rt]&&nt(It,Rt,Dt(null));let Nt,Gt,Ut,zt=function(t) {It[Rt][t]=!0;},Ht=ot('native-function-to-string',Function.toString),qt=H.WeakMap,Wt='function'==typeof qt&&/native code/.test(Ht.call(qt)),Jt=H.WeakMap;if (Wt) {const Yt=new Jt,Xt=Yt.get,$t=Yt.has,Qt=Yt.set;Nt=function(t,e) {return Qt.call(Yt,t,e),e;},Gt=function(t) {return Xt.call(Yt,t)||{};},Ut=function(t) {return $t.call(Yt,t);};} else {const Zt=jt('state');Et[Zt]=!0,Nt=function(t,e) {return nt(t,Zt,e),e;},Gt=function(t) {return kt(t,Zt)?t[Zt]:{};},Ut=function(t) {return kt(t,Zt);};} var te,ee,ne,ie={set:Nt,get:Gt,has:Ut,enforce:function(t) {return Ut(t)?Gt(t):Nt(t,{});},getterFor:function(t) {return function(e) {let n;if (!T(e)||(n=Gt(e)).type!==t) {throw TypeError('Incompatible receiver, '+t+' required');} return n;};}},oe={}.propertyIsEnumerable,re=Object.getOwnPropertyDescriptor,se={f:re&&!oe.call({1:2},1)?function(t) {const e=re(this,t);return !!e&&e.enumerable;}:oe},ue=Object.getOwnPropertyDescriptor,ae={f:q?ue:function(t,e) {if (t=wt(t),e=Q(e,!0),X) {try {return ue(t,e);} catch (t) {}} if (kt(t,e)) {return et(!se.f.call(t,e),t[e]);}}},le=V(function(t) {const e=ie.get,n=ie.enforce,i=String(Ht).split('toString');ot('inspectSource',function(t) {return Ht.call(t);}),(t.exports=function(t,e,o,r) {let s=!!r&&!!r.unsafe,u=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;'function'==typeof o&&('string'!=typeof e||kt(o,'name')||nt(o,'name',e),n(o).source=i.join('string'==typeof e?e:'')),t!==H?(s?!a&&t[e]&&(u=!0):delete t[e],u?t[e]=o:nt(t,e,o)):u?t[e]=o:it(e,o);})(Function.prototype,'toString',function() {return 'function'==typeof this&&e(this).source||Ht.call(this);});}),ce=Lt.concat('length','prototype'),he={f:Object.getOwnPropertyNames||function(t) {return xt(t,ce);}},de={f:Object.getOwnPropertySymbols},fe=H.Reflect,pe=fe&&fe.ownKeys||function(t) {const e=he.f($(t)),n=de.f;return n?e.concat(n(t)):e;},ye=function(t,e) {for (let n=pe(e),i=tt.f,o=ae.f,r=0;r<n.length;r++) {const s=n[r];kt(t,s)||i(t,s,o(e,s));}},ve=/#|\.prototype\./,ge=function(t,e) {const n=be[me(t)];return n==Se||n!=we&&('function'==typeof e?S(e):!!e);},me=ge.normalize=function(t) {return String(t).replace(ve,'.').toLowerCase();},be=ge.data={},we=ge.NATIVE='N',Se=ge.POLYFILL='P',ke=ge,_e=ae.f,Pe=!S(function() {function t() {} return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype;}),Ee=jt('IE_PROTO'),Be=Object.prototype,xe=Pe?Object.getPrototypeOf:function(t) {return t=x(t),kt(t,Ee)?t[Ee]:'function'==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Be:null;},Le=ht('iterator'),Me=!1;[].keys&&('next'in(ne=[].keys())?(ee=xe(xe(ne)))!==Object.prototype&&(te=ee):Me=!0),null==te&&(te={}),kt(te,Le)||nt(te,Le,function() {return this;});const Ce={IteratorPrototype:te,BUGGY_SAFARI_ITERATORS:Me},Oe=tt.f,Ae=ht('toStringTag'),Te=function(t,e,n) {t&&!kt(t=n?t:t.prototype,Ae)&&Oe(t,Ae,{configurable:!0,value:e});},je=Ce.IteratorPrototype,Ve=Object.setPrototypeOf||('__proto__'in{}?function() {let t,e=!1,n={};try {(t=Object.getOwnPropertyDescriptor(Object.prototype,'__proto__').set).call(n,[]),e=n instanceof Array;} catch (t) {} return function(n,i) {return function(t,e) {if ($(t),!T(e)&&null!==e) {throw TypeError('Can\'t set '+String(e)+' as a prototype');}}(n,i),e?t.call(n,i):n.__proto__=i,n;};}():void 0),Ke=ht('iterator'),Fe=Ce.IteratorPrototype,De=Ce.BUGGY_SAFARI_ITERATORS,Re=function() {return this;},Ie=ie.set,Ne=ie.getterFor('Array Iterator'),Ge=function(t,e,n,i,o,r,s) {!function(t,e,n) {const i=e+' Iterator';t.prototype=Dt(je,{next:et(1,n)}),Te(t,i,!1);}(n,e,i);var u,a,l,c=function(t) {if (t===o&&y) {return y;} if (!De&&t in f) {return f[t];} switch (t) {case 'keys':case 'values':case 'entries':return function() {return new n(this,t);};} return function() {return new n(this);};},h=e+' Iterator',d=!1,f=t.prototype,p=f[Ke]||f['@@iterator']||o&&f[o],y=!De&&p||c(o),v='Array'==e&&f.entries||p;if (v&&(u=xe(v.call(new t)),Fe!==Object.prototype&&u.next&&(xe(u)!==Fe&&(Ve?Ve(u,Fe):'function'!=typeof u[Ke]&&nt(u,Ke,Re)),Te(u,h,!0))),'values'==o&&p&&'values'!==p.name&&(d=!0,y=function() {return p.call(this);}),f[Ke]!==y&&nt(f,Ke,y),o) {if (a={values:c('values'),keys:r?y:c('keys'),entries:c('entries')},s) {for (l in a) {!De&&!d&&l in f||le(f,l,a[l]);}} else {!function(t,e) {let n,i,o,r,s,u=t.target,a=t.global,l=t.stat;if (n=a?H:l?H[u]||it(u,{}):(H[u]||{}).prototype) {for (i in e) {if (r=e[i],o=t.noTargetGet?(s=_e(n,i))&&s.value:n[i],!ke(a?i:u+(l?'.':'#')+i,t.forced)&&void 0!==o) {if (typeof r==typeof o) {continue;}ye(r,o);}(t.sham||o&&o.sham)&&nt(r,'sham',!0),le(n,i,r,t);}}}({target:e,proto:!0,forced:De||d},a);}} return a;}(Array,'Array',function(t,e) {Ie(this,{type:'Array Iterator',target:wt(t),index:0,kind:e});},function() {const t=Ne(this),e=t.target,n=t.kind,i=t.index++;return !e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):'keys'==n?{value:i,done:!1}:'values'==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1};},'values');zt('keys'),zt('values'),zt('entries');const Ue=ht('iterator'),ze=ht('toStringTag'),He=Ge.values;for (const qe in b) {const We=H[qe],Je=We&&We.prototype;if (Je) {if (Je[Ue]!==He) {try {nt(Je,Ue,He);} catch (t) {Je[Ue]=He;}} if (Je[ze]||nt(Je,ze,qe),b[qe]) {for (const Ye in Ge) {if (Je[Ye]!==Ge[Ye]) {try {nt(Je,Ye,Ge[Ye]);} catch (t) {Je[Ye]=Ge[Ye];}}}}}}V(function(t) {const e=function(t) {let e,n=Object.prototype,i=n.hasOwnProperty,o='function'==typeof Symbol?Symbol:{},r=o.iterator||'@@iterator',s=o.asyncIterator||'@@asyncIterator',u=o.toStringTag||'@@toStringTag';function a(t,e,n,i) {const o=e&&e.prototype instanceof y?e:y,r=Object.create(o.prototype),s=new x(i||[]);return r._invoke=function(t,e,n) {let i=c;return function(o,r) {if (i===d) {throw new Error('Generator is already running');} if (i===f) {if ('throw'===o) {throw r;} return M();} for (n.method=o,n.arg=r;;) {const s=n.delegate;if (s) {const u=P(s,n);if (u) {if (u===p) {continue;} return u;}} if ('next'===n.method) {n.sent=n._sent=n.arg;} else if ('throw'===n.method) {if (i===c) {throw i=f,n.arg;}n.dispatchException(n.arg);} else {'return'===n.method&&n.abrupt('return',n.arg);}i=d;const a=l(t,e,n);if ('normal'===a.type) {if (i=n.done?f:h,a.arg===p) {continue;} return {value:a.arg,done:n.done};}'throw'===a.type&&(i=f,n.method='throw',n.arg=a.arg);}};}(t,n,s),r;} function l(t,e,n) {try {return {type:'normal',arg:t.call(e,n)};} catch (t) {return {type:'throw',arg:t};}}t.wrap=a;var c='suspendedStart',h='suspendedYield',d='executing',f='completed',p={};function y() {} function v() {} function g() {} let m={};m[r]=function() {return this;};const b=Object.getPrototypeOf,w=b&&b(b(L([])));w&&w!==n&&i.call(w,r)&&(m=w);const S=g.prototype=y.prototype=Object.create(m);function k(t) {['next','throw','return'].forEach(function(e) {t[e]=function(t) {return this._invoke(e,t);};});} function _(t) {let e;this._invoke=function(n,o) {function r() {return new Promise(function(e,r) {!function e(n,o,r,s) {const u=l(t[n],t,o);if ('throw'!==u.type) {const a=u.arg,c=a.value;return c&&'object'==typeof c&&i.call(c,'__await')?Promise.resolve(c.__await).then(function(t) {e('next',t,r,s);},function(t) {e('throw',t,r,s);}):Promise.resolve(c).then(function(t) {a.value=t,r(a);},function(t) {return e('throw',t,r,s);});}s(u.arg);}(n,o,e,r);});} return e=e?e.then(r,r):r();};} function P(t,n) {const i=t.iterator[n.method];if (i===e) {if (n.delegate=null,'throw'===n.method) {if (t.iterator.return&&(n.method='return',n.arg=e,P(t,n),'throw'===n.method)) {return p;}n.method='throw',n.arg=new TypeError('The iterator does not provide a \'throw\' method');} return p;} const o=l(i,t.iterator,n.arg);if ('throw'===o.type) {return n.method='throw',n.arg=o.arg,n.delegate=null,p;} const r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,'return'!==n.method&&(n.method='next',n.arg=e),n.delegate=null,p):r:(n.method='throw',n.arg=new TypeError('iterator result is not an object'),n.delegate=null,p);} function E(t) {const e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);} function B(t) {const e=t.completion||{};e.type='normal',delete e.arg,t.completion=e;} function x(t) {this.tryEntries=[{tryLoc:'root'}],t.forEach(E,this),this.reset(!0);} function L(t) {if (t) {const n=t[r];if (n) {return n.call(t);} if ('function'==typeof t.next) {return t;} if (!isNaN(t.length)) {let o=-1,s=function n() {for (;++o<t.length;) {if (i.call(t,o)) {return n.value=t[o],n.done=!1,n;}} return n.value=e,n.done=!0,n;};return s.next=s;}} return {next:M};} function M() {return {value:e,done:!0};} return v.prototype=S.constructor=g,g.constructor=v,g[u]=v.displayName='GeneratorFunction',t.isGeneratorFunction=function(t) {const e='function'==typeof t&&t.constructor;return !!e&&(e===v||'GeneratorFunction'===(e.displayName||e.name));},t.mark=function(t) {return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u in t||(t[u]='GeneratorFunction')),t.prototype=Object.create(S),t;},t.awrap=function(t) {return {__await:t};},k(_.prototype),_.prototype[s]=function() {return this;},t.AsyncIterator=_,t.async=function(e,n,i,o) {const r=new _(a(e,n,i,o));return t.isGeneratorFunction(n)?r:r.next().then(function(t) {return t.done?t.value:r.next();});},k(S),S[u]='Generator',S[r]=function() {return this;},S.toString=function() {return '[object Generator]';},t.keys=function(t) {const e=[];for (const n in t) {e.push(n);} return e.reverse(),function n() {for (;e.length;) {const i=e.pop();if (i in t) {return n.value=i,n.done=!1,n;}} return n.done=!0,n;};},t.values=L,x.prototype={constructor:x,reset:function(t) {if (this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method='next',this.arg=e,this.tryEntries.forEach(B),!t) {for (const n in this) {'t'===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e);}}},stop:function() {this.done=!0;const t=this.tryEntries[0].completion;if ('throw'===t.type) {throw t.arg;} return this.rval;},dispatchException:function(t) {if (this.done) {throw t;} const n=this;function o(i,o) {return u.type='throw',u.arg=t,n.next=i,o&&(n.method='next',n.arg=e),!!o;} for (let r=this.tryEntries.length-1;r>=0;--r) {var s=this.tryEntries[r],u=s.completion;if ('root'===s.tryLoc) {return o('end');} if (s.tryLoc<=this.prev) {const a=i.call(s,'catchLoc'),l=i.call(s,'finallyLoc');if (a&&l) {if (this.prev<s.catchLoc) {return o(s.catchLoc,!0);} if (this.prev<s.finallyLoc) {return o(s.finallyLoc);}} else if (a) {if (this.prev<s.catchLoc) {return o(s.catchLoc,!0);}} else {if (!l) {throw new Error('try statement without catch or finally');} if (this.prev<s.finallyLoc) {return o(s.finallyLoc);}}}}},abrupt:function(t,e) {for (let n=this.tryEntries.length-1;n>=0;--n) {const o=this.tryEntries[n];if (o.tryLoc<=this.prev&&i.call(o,'finallyLoc')&&this.prev<o.finallyLoc) {var r=o;break;}}r&&('break'===t||'continue'===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);const s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method='next',this.next=r.finallyLoc,p):this.complete(s);},complete:function(t,e) {if ('throw'===t.type) {throw t.arg;} return 'break'===t.type||'continue'===t.type?this.next=t.arg:'return'===t.type?(this.rval=this.arg=t.arg,this.method='return',this.next='end'):'normal'===t.type&&e&&(this.next=e),p;},finish:function(t) {for (let e=this.tryEntries.length-1;e>=0;--e) {const n=this.tryEntries[e];if (n.finallyLoc===t) {return this.complete(n.completion,n.afterLoc),B(n),p;}}},catch:function(t) {for (let e=this.tryEntries.length-1;e>=0;--e) {const n=this.tryEntries[e];if (n.tryLoc===t) {const i=n.completion;if ('throw'===i.type) {var o=i.arg;B(n);} return o;}} throw new Error('illegal catch attempt');},delegateYield:function(t,n,i) {return this.delegate={iterator:L(t),resultName:n,nextLoc:i},'next'===this.method&&(this.arg=e),p;}},t;}(t.exports);try {regeneratorRuntime=e;} catch (t) {Function('r','regeneratorRuntime = r')(e);}});function Xe(t) {return (Xe='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t) {return typeof t;}:function(t) {return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t;})(t);} function $e(t,e,n,i,o,r,s) {try {var u=t[r](s),a=u.value;} catch (t) {return void n(t);}u.done?e(a):Promise.resolve(a).then(i,o);} function Qe(t) {return function() {const e=this,n=arguments;return new Promise(function(i,o) {const r=t.apply(e,n);function s(t) {$e(r,i,o,s,u,'next',t);} function u(t) {$e(r,i,o,s,u,'throw',t);}s(void 0);});};} function Ze(t,e) {if (!(t instanceof e)) {throw new TypeError('Cannot call a class as a function');}} function tn(t,e) {for (let n=0;n<e.length;n++) {const i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,'value'in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}} function en(t,e,n) {return e&&tn(t.prototype,e),n&&tn(t,n),t;} function nn(t,e) {if ('function'!=typeof e&&null!==e) {throw new TypeError('Super expression must either be null or a function');}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rn(t,e);} function on(t) {return (on=Object.setPrototypeOf?Object.getPrototypeOf:function(t) {return t.__proto__||Object.getPrototypeOf(t);})(t);} function rn(t,e) {return (rn=Object.setPrototypeOf||function(t,e) {return t.__proto__=e,t;})(t,e);} function sn(t) {if (void 0===t) {throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');} return t;} function un(t,e) {return !e||'object'!=typeof e&&'function'!=typeof e?sn(t):e;} const an=function() {function t() {Ze(this,t);} return en(t,null,[{key:'basic',value:function() {return t.canvas?t.webaudio||t.htmlAudio?null:'Browser does not support WebAudio or HTMLAudio':'Browser does not support canvas';}},{key:'test',value:function(e) {const n=this.basic();if (n) {return n;} const i=e.features,o=e.ui,r=e.sizes;for (const s in i) {if (!0===i[s]&&!t[s]) {return 'Browser does not support '+s;}} if (!o.touch&&t.touch) {return 'Game does not support touch input';} const u=Math.max(window.screen.width,window.screen.height);return !r.xsmall&&u<480?'Game doesn\'t support extra small screens':!r.small&&u<768?'Game doesn\'t support small screens':!r.medium&&u<992?'Game doesn\'t support medium screens':!r.large&&u<1200?'Game doesn\'t support large screens':!r.xlarge&&u>=1200?'Game doesn\'t support extra large screens':null;}},{key:'webgl',get:function() {const t=document.createElement('canvas');return !(!t||!t.getContext('webgl')&&!t.getContext('experimental-webgl'));}},{key:'canvas',get:function() {const t=document.createElement('canvas');return !(null===t||!t.getContext||!t.getContext('2d'));}},{key:'webaudio',get:function() {return 'webkitAudioContext'in window||'AudioContext'in window;}},{key:'htmlAudio',get:function() {return 'HTMLAudioElement'in window;}},{key:'websockets',get:function() {return 'WebSocket'in window||'MozWebSocket'in window;}},{key:'geolocation',get:function() {return 'geolocation'in navigator;}},{key:'webworkers',get:function() {return 'function'==typeof Worker;}},{key:'touch',get:function() {return !!('ontouchstart'in window||navigator.msPointerEnabled&&navigator.msMaxTouchPoints>0||navigator.pointerEnabled&&navigator.maxTouchPoints>0);}},{key:'info',get:function() {return 'Browser Feature Detection\n\t\t\t\tCanvas support '.concat(t.canvas?'✓':'×','\n\t\t\t\tWebGL support ').concat(t.webgl?'✓':'×','\n\t\t\t\tWebAudio support ').concat(t.webAudio?'✓':'×');}}]),t;}();function ln(t,e) {return t(e={exports:{}},e.exports),e.exports;} const cn=ln(function(t) {function e(t) {return (e='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t) {return typeof t;}:function(t) {return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t;})(t);} function n(i) {return 'function'==typeof Symbol&&'symbol'===e(Symbol.iterator)?t.exports=n=function(t) {return e(t);}:t.exports=n=function(t) {return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':e(t);},n(i);}t.exports=n;}),hn=function(t,e) {if (!(t instanceof e)) {throw new TypeError('Cannot call a class as a function');}};function dn(t,e) {for (let n=0;n<e.length;n++) {const i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,'value'in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}} const fn=function(t,e,n) {return e&&dn(t.prototype,e),n&&dn(t,n),t;},pn=function() {function t() {hn(this,t),this._listeners={};} return fn(t,[{key:'on',value:function(t,e) {const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._listeners[t]||(this._listeners[t]=[]),e._priority=parseInt(n)||0,-1===this._listeners[t].indexOf(e)&&(this._listeners[t].push(e),this._listeners[t].length>1&&this._listeners[t].sort(this.listenerSorter));}},{key:'listenerSorter',value:function(t,e) {return t._priority-e._priority;}},{key:'off',value:function(t,e) {if (void 0!==this._listeners[t]) {if (void 0!==e) {const n=this._listeners[t].indexOf(e);-1<n&&this._listeners[t].splice(n,1);} else {delete this._listeners[t];}}}},{key:'trigger',value:function(t) {const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if ('string'==typeof t&&(t={type:t,data:'object'===cn(e)&&null!==e?e:{}}),void 0!==this._listeners[t.type]) {for (let n=this._listeners[t.type].length-1;n>=0;n--) {this._listeners[t.type][n](t);}}}},{key:'destroy',value:function() {this._listeners={};}}]),t;}(),yn=ln(function(t) {const e=function(t) {let e,n=Object.prototype,i=n.hasOwnProperty,o='function'==typeof Symbol?Symbol:{},r=o.iterator||'@@iterator',s=o.asyncIterator||'@@asyncIterator',u=o.toStringTag||'@@toStringTag';function a(t,e,n,i) {const o=e&&e.prototype instanceof y?e:y,r=Object.create(o.prototype),s=new x(i||[]);return r._invoke=function(t,e,n) {let i=c;return function(o,r) {if (i===d) {throw new Error('Generator is already running');} if (i===f) {if ('throw'===o) {throw r;} return M();} for (n.method=o,n.arg=r;;) {const s=n.delegate;if (s) {const u=P(s,n);if (u) {if (u===p) {continue;} return u;}} if ('next'===n.method) {n.sent=n._sent=n.arg;} else if ('throw'===n.method) {if (i===c) {throw i=f,n.arg;}n.dispatchException(n.arg);} else {'return'===n.method&&n.abrupt('return',n.arg);}i=d;const a=l(t,e,n);if ('normal'===a.type) {if (i=n.done?f:h,a.arg===p) {continue;} return {value:a.arg,done:n.done};}'throw'===a.type&&(i=f,n.method='throw',n.arg=a.arg);}};}(t,n,s),r;} function l(t,e,n) {try {return {type:'normal',arg:t.call(e,n)};} catch (t) {return {type:'throw',arg:t};}}t.wrap=a;var c='suspendedStart',h='suspendedYield',d='executing',f='completed',p={};function y() {} function v() {} function g() {} let m={};m[r]=function() {return this;};const b=Object.getPrototypeOf,w=b&&b(b(L([])));w&&w!==n&&i.call(w,r)&&(m=w);const S=g.prototype=y.prototype=Object.create(m);function k(t) {['next','throw','return'].forEach(function(e) {t[e]=function(t) {return this._invoke(e,t);};});} function _(t) {let e;this._invoke=function(n,o) {function r() {return new Promise(function(e,r) {!function e(n,o,r,s) {const u=l(t[n],t,o);if ('throw'!==u.type) {const a=u.arg,c=a.value;return c&&'object'==typeof c&&i.call(c,'__await')?Promise.resolve(c.__await).then(function(t) {e('next',t,r,s);},function(t) {e('throw',t,r,s);}):Promise.resolve(c).then(function(t) {a.value=t,r(a);},function(t) {return e('throw',t,r,s);});}s(u.arg);}(n,o,e,r);});} return e=e?e.then(r,r):r();};} function P(t,n) {const i=t.iterator[n.method];if (i===e) {if (n.delegate=null,'throw'===n.method) {if (t.iterator.return&&(n.method='return',n.arg=e,P(t,n),'throw'===n.method)) {return p;}n.method='throw',n.arg=new TypeError('The iterator does not provide a \'throw\' method');} return p;} const o=l(i,t.iterator,n.arg);if ('throw'===o.type) {return n.method='throw',n.arg=o.arg,n.delegate=null,p;} const r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,'return'!==n.method&&(n.method='next',n.arg=e),n.delegate=null,p):r:(n.method='throw',n.arg=new TypeError('iterator result is not an object'),n.delegate=null,p);} function E(t) {const e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);} function B(t) {const e=t.completion||{};e.type='normal',delete e.arg,t.completion=e;} function x(t) {this.tryEntries=[{tryLoc:'root'}],t.forEach(E,this),this.reset(!0);} function L(t) {if (t) {const n=t[r];if (n) {return n.call(t);} if ('function'==typeof t.next) {return t;} if (!isNaN(t.length)) {let o=-1,s=function n() {for (;++o<t.length;) {if (i.call(t,o)) {return n.value=t[o],n.done=!1,n;}} return n.value=e,n.done=!0,n;};return s.next=s;}} return {next:M};} function M() {return {value:e,done:!0};} return v.prototype=S.constructor=g,g.constructor=v,g[u]=v.displayName='GeneratorFunction',t.isGeneratorFunction=function(t) {const e='function'==typeof t&&t.constructor;return !!e&&(e===v||'GeneratorFunction'===(e.displayName||e.name));},t.mark=function(t) {return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u in t||(t[u]='GeneratorFunction')),t.prototype=Object.create(S),t;},t.awrap=function(t) {return {__await:t};},k(_.prototype),_.prototype[s]=function() {return this;},t.AsyncIterator=_,t.async=function(e,n,i,o) {const r=new _(a(e,n,i,o));return t.isGeneratorFunction(n)?r:r.next().then(function(t) {return t.done?t.value:r.next();});},k(S),S[u]='Generator',S[r]=function() {return this;},S.toString=function() {return '[object Generator]';},t.keys=function(t) {const e=[];for (const n in t) {e.push(n);} return e.reverse(),function n() {for (;e.length;) {const i=e.pop();if (i in t) {return n.value=i,n.done=!1,n;}} return n.done=!0,n;};},t.values=L,x.prototype={constructor:x,reset:function(t) {if (this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method='next',this.arg=e,this.tryEntries.forEach(B),!t) {for (const n in this) {'t'===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e);}}},stop:function() {this.done=!0;const t=this.tryEntries[0].completion;if ('throw'===t.type) {throw t.arg;} return this.rval;},dispatchException:function(t) {if (this.done) {throw t;} const n=this;function o(i,o) {return u.type='throw',u.arg=t,n.next=i,o&&(n.method='next',n.arg=e),!!o;} for (let r=this.tryEntries.length-1;r>=0;--r) {var s=this.tryEntries[r],u=s.completion;if ('root'===s.tryLoc) {return o('end');} if (s.tryLoc<=this.prev) {const a=i.call(s,'catchLoc'),l=i.call(s,'finallyLoc');if (a&&l) {if (this.prev<s.catchLoc) {return o(s.catchLoc,!0);} if (this.prev<s.finallyLoc) {return o(s.finallyLoc);}} else if (a) {if (this.prev<s.catchLoc) {return o(s.catchLoc,!0);}} else {if (!l) {throw new Error('try statement without catch or finally');} if (this.prev<s.finallyLoc) {return o(s.finallyLoc);}}}}},abrupt:function(t,e) {for (let n=this.tryEntries.length-1;n>=0;--n) {const o=this.tryEntries[n];if (o.tryLoc<=this.prev&&i.call(o,'finallyLoc')&&this.prev<o.finallyLoc) {var r=o;break;}}r&&('break'===t||'continue'===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);const s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method='next',this.next=r.finallyLoc,p):this.complete(s);},complete:function(t,e) {if ('throw'===t.type) {throw t.arg;} return 'break'===t.type||'continue'===t.type?this.next=t.arg:'return'===t.type?(this.rval=this.arg=t.arg,this.method='return',this.next='end'):'normal'===t.type&&e&&(this.next=e),p;},finish:function(t) {for (let e=this.tryEntries.length-1;e>=0;--e) {const n=this.tryEntries[e];if (n.finallyLoc===t) {return this.complete(n.completion,n.afterLoc),B(n),p;}}},catch:function(t) {for (let e=this.tryEntries.length-1;e>=0;--e) {const n=this.tryEntries[e];if (n.tryLoc===t) {const i=n.completion;if ('throw'===i.type) {var o=i.arg;B(n);} return o;}} throw new Error('illegal catch attempt');},delegateYield:function(t,n,i) {return this.delegate={iterator:L(t),resultName:n,nextLoc:i},'next'===this.method&&(this.arg=e),p;}},t;}(t.exports);try {regeneratorRuntime=e;} catch (t) {Function('r','regeneratorRuntime = r')(e);}}),vn=function(t) {if (void 0===t) {throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');} return t;},gn=function(t,e) {return !e||'object'!==cn(e)&&'function'!=typeof e?vn(t):e;},mn=ln(function(t) {function e(n) {return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t) {return t.__proto__||Object.getPrototypeOf(t);},e(n);}t.exports=e;}),bn=function(t,e) {for (;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mn(t));) {} return t;},wn=ln(function(t) {function e(n,i,o) {return 'undefined'!=typeof Reflect&&Reflect.get?t.exports=e=Reflect.get:t.exports=e=function(t,e,n) {const i=bn(t,e);if (i) {const o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value;}},e(n,i,o||n);}t.exports=e;}),Sn=ln(function(t) {function e(n,i) {return t.exports=e=Object.setPrototypeOf||function(t,e) {return t.__proto__=e,t;},e(n,i);}t.exports=e;}),kn=function(t) {function e() {let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100*Math.random()|0;return hn(this,e),(t=gn(this,mn(e).call(this))).id='BELLHOP:'.concat(n),t.connected=!1,t.isChild=!0,t.connecting=!1,t.debug=!1,t.origin='*',t._sendLater=[],t.iframe=null,t.receive=t.receive.bind(vn(t)),t;} return function(t,e) {if ('function'!=typeof e&&null!==e) {throw new TypeError('Super expression must either be null or a function');}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e);}(e,pn),fn(e,[{key:'receive',value:function(t) {if (this.target===t.source) {if (this.logDebugMessage(!0,t),'connected'===t.data) {this.onConnectionReceived(t.data);} else {let e=t.data;if ('string'==typeof e) {try {e=JSON.parse(e);} catch (t) {console.error('Bellhop error: ',t);}} this.connected&&'object'===cn(e)&&e.type&&this.trigger(e);}}}},{key:'onConnectionReceived',value:function(t) {this.connecting=!1,this.connected=!0,this.isChild||this.target.postMessage(t,this.origin);for (let e=0;e<this._sendLater.length;e++) {const n=this._sendLater[e],i=n.type,o=n.data;this.send(i,o);} this._sendLater.length=0,this.trigger('connected');}},{key:'connect',value:function(t) {const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'*';this.connecting||(this.disconnect(),this.connecting=!0,t instanceof HTMLIFrameElement&&(this.iframe=t),this.isChild=void 0===t,this.supported=!0,this.isChild&&(this.supported=window!=t),this.origin=e,window.addEventListener('message',this.receive),this.isChild&&(window===this.target?this.trigger('failed'):this.target.postMessage('connected',this.origin)));}},{key:'disconnect',value:function() {this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener('message',this.receive);}},{key:'send',value:function(t) {const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if ('string'!=typeof t) {throw 'The event type must be a string';} const n={type:t,data:e};this.logDebugMessage(!1,n),this.connecting?this._sendLater.push(n):this.target.postMessage(JSON.stringify(n),this.origin);}},{key:'fetch',value:function(t,e) {const n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if (!this.connecting&&!this.connected) {throw 'No connection, please call connect() first';} this.on(t,function t(i) {o&&n.off(i.type,t),e(i);}),this.send(t,i);}},{key:'respond',value:function(t) {let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;this.on(t,function t(o) {let r;return yn.async(function(s) {for (;;) {switch (s.prev=s.next) {case 0:return n&&i.off(o,t),'function'==typeof e&&(e=e()),s.next=4,yn.awrap(e);case 4:r=s.sent,i.send(o.type,r);case 6:case 'end':return s.stop();}}});});}},{key:'logDebugMessage',value:function() {const t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;this.debug&&'function'==typeof this.debug?this.debug({isChild:this.isChild,received:!1,message:e}):this.debug&&console.log('Bellhop Instance ('.concat(this.isChild?'Child':'Parent',') ').concat(t?'Receieved':'Sent'),e);}},{key:'destroy',value:function() {wn(mn(e.prototype),'destroy',this).call(this),this.disconnect(),this._sendLater.length=0;}},{key:'target',get:function() {return this.isChild?window.parent:this.iframe.contentWindow;}}]),e;}(),_n=function() {function t(e) {const n=e.plugins,i=void 0===n?[]:n;Ze(this,t),this.client=new kn,this.client.hidden=this.client.receive.bind(this.client),this.client.hiddenSend=this.client.send.bind(this.client),this.client.receive=function(t) {this.hidden(t);}.bind(this.client),this.client.send=function(t,e) {this.hiddenSend(t,e);}.bind(this.client),this.plugins=i;} return en(t,[{key:'setupPlugins',value:function() {for (var t=this,e=[],n=function(n,i) {if (!t.plugins[n].preload) {return {v:void 0};}e.push(t.plugins[n].preload(t).catch(function(t) {this.plugins[n].preloadFailed=!0,console.warn(this.plugins[n].name,'Preload Failed:',t);}));},i=0,o=this.plugins.length;i<o;i++) {const r=n(i);if ('object'===Xe(r)) {return r.v;}} return Promise.all(e).then(function() {t.plugins=t.plugins.filter(function(t) {return !0!==t.preloadFailed;}),t.plugins.forEach(function(e) {e.init&&e.init(t);}),t.plugins.forEach(function(e) {e.start&&e.start(t);});});}},{key:'uses',value:function(t) {this.plugins.push(t);}},{key:'getPlugin',value:function(t) {return this.plugins.find(function(e) {return e.name===t;});}}]),t;}(),Pn=function(t) {function e(t) {let n,i=t.iframeSelector,o=t.plugins,r=void 0===o?[]:o;if (Ze(this,e),(n=un(this,on(e).call(this,{plugins:r}))).iframe=document.querySelector(i),null===n.iframe) {throw new Error('No iframe was found with the provided selector');} return n.loaded=!1,n.loading=!1,n.release=null,n.initClient(),n.setupPlugins(),n;} return nn(e,_n),en(e,[{key:'onLoading',value:function() {this.client.trigger('opening');}},{key:'onLoadDone',value:function() {this.loading=!1,this.loaded=!0,this.iframe.classList.remove('loading'),this.client.trigger('opened');}},{key:'onEndGame',value:function() {this.reset();}},{key:'onLocalError',value:function(t) {console.error('SpringRoll Container error: ',t,(new Error).stack);}},{key:'reset',value:function() {(this.loaded||this.loading)&&this.client.trigger('closed'),this.loaded=!1,this.loading=!1,this.iframe.setAttribute('src',''),this.iframe.classList.remove('loading');}},{key:'initClient',value:function() {this.client.on('loading',this.onLoading.bind(this)),this.client.on('loaded',this.onLoadDone.bind(this)),this.client.on('loadDone',this.onLoadDone.bind(this)),this.client.on('endGame',this.onEndGame.bind(this)),this.client.on('localError',this.onLocalError.bind(this)),this.client.connect(this.iframe);}},{key:'_onCloseFailed',value:function() {this.reset();}},{key:'_internalOpen',value:function(t) {const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.singlePlay,i=void 0!==n&&n,o=e.playOptions,r=void 0===o?null:o,s={singlePlay:i,playOptions:r};this.reset(),this.loading=!0,this.initClient();const u=an.basic();u&&(console.error('ERROR:',u),this.client.trigger('unsupported'));let a=t;if (null!==s.playOptions) {const l='playOptions='+encodeURIComponent(JSON.stringify(s.playOptions));a=-1===t.indexOf('?')?''.concat(t,'?').concat(l):''.concat(t,'&').concat(l);} this.iframe.classList.add('loading'),this.iframe.setAttribute('src',a),this.client.respond('singlePlay',{singlePlay:i}),this.client.respond('playOptions',r),this.client.trigger('open');}},{key:'openPath',value:function(t) {let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};'object'!==Xe(e)&&(console.warn('SpringRoll Container.openPath was passed a invalid options parameter. Using default parameters instead'),e={}),this._internalOpen(t,Object.assign({singlePlay:!1,playOptions:{}},e));}},{key:'openRemote',value:function() {const t=Qe(regeneratorRuntime.mark(function t(e) {let n,i,o,r,s,u,a,l,c,h,d,f=arguments;return regeneratorRuntime.wrap(function(t) {for (;;) {switch (t.prev=t.next) {case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},i=n.query,o=void 0===i?'':i,r=n.singlePlay,s=void 0!==r&&r,u=n.playOptions,a=void 0===u?null:u,this.release=null,t.next=4,fetch(e,{headers:{'Content-Type':'application/json'}});case 4:return l=t.sent,t.next=7,l.json();case 7:if ((c=t.sent).success) {t.next=10;break;} throw new Error(c.error);case 10:if (h=c.data,!(d=an.test(h.capabilities))) {t.next=15;break;} throw this.client.trigger('unsupported',{error:d}),new Error(d);case 15:this.release=h,this._internalOpen(h.url+o,{singlePlay:s,playOptions:a});case 17:case 'end':return t.stop();}}},t,this);}));return function(e) {return t.apply(this,arguments);};}()},{key:'destroy',value:function() {this.reset(),this.iframe=null,this.options=null,this.release=null;}},{key:'close',value:function() {this.loading||this.loaded?(this.client.trigger('close'),this.client.send('close')):this.reset();}}],[{key:'version',get:function() {return '2.0.0';}}]),e;}(),En=function() {function t() {const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function() {},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function() {};Ze(this,t),this._onFocus=e,this._onBlur=n,this.onFocus=function() {this.enabled&&this._onFocus();}.bind(this),this.onBlur=function() {this.enabled&&this._onBlur();}.bind(this),this._enabled=!1,this.enabled=!0,this.onToggle=this.onToggle.bind(this);} return en(t,[{key:'destroy',value:function() {this.enabled=!1,this.onToggle=null,this.onFocus=null,this.onBlur=null;}},{key:'onToggle',value:function(t) {this.enabled&&(document.hidden?this.onBlur(t):this.onFocus(t));}},{key:'enabled',get:function() {return this._enabled;},set:function(t) {this._enabled=t,document.removeEventListener('visibilitychange',this.onToggle,!1),window.removeEventListener('blur',this.onBlur),window.removeEventListener('focus',this.onFocus),window.removeEventListener('pagehide',this.onBlur),window.removeEventListener('pageshow',this.onFocus),window.removeEventListener('visibilitychange',this.onToggle,!1),this._enabled&&(document.addEventListener('visibilitychange',this.onToggle,!1),window.addEventListener('blur',this.onBlur),window.addEventListener('focus',this.onFocus),window.addEventListener('pagehide',this.onBlur),window.addEventListener('pageshow',this.onFocus),window.addEventListener('visibilitychange',this.onToggle,!1));}}]),t;}(),Bn=function() {function t() {Ze(this,t);} return en(t,null,[{key:'remove',value:function(t) {localStorage.removeItem(t),sessionStorage.removeItem(t);}},{key:'write',value:function(t,e) {return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?sessionStorage.setItem(t,JSON.stringify('function'==typeof e?e():e)):localStorage.setItem(t,JSON.stringify('function'==typeof e?e():e));}},{key:'read',value:function(t) {const e=localStorage.getItem(t)||sessionStorage.getItem(t);if ('string'!=typeof e) {return e;} try {return JSON.parse(e);} catch (t) {return e;}}}]),t;}(),xn=function() {function t(e) {Ze(this,t),this.name=e,this.client=null;} return en(t,[{key:'preload',value:function() {const t=Qe(regeneratorRuntime.mark(function t(e) {let n;return regeneratorRuntime.wrap(function(t) {for (;;) {switch (t.prev=t.next) {case 0:n=e.client,this.client=n;case 2:case 'end':return t.stop();}}},t,this);}));return function(e) {return t.apply(this,arguments);};}()},{key:'start',value:function(t) {}},{key:'init',value:function(t) {}},{key:'sendProperty',value:function(t,e) {Bn.write(t,e),this.client.send(t,e);}}]),t;}(),Ln=function(t) {function e(t) {let n;return Ze(this,e),(n=un(this,on(e).call(this,t))).sendMutes=!1,n;} return nn(e,xn),en(e,[{key:'init',value:function(t) {this.sendMutes=!0;}},{key:'_disableButton',value:function(t) {t instanceof HTMLButtonElement&&(t.classList.remove('enabled'),t.classList.add('disabled'));}},{key:'reset',value:function() {this.sendMutes=!1;}},{key:'_setMuteProp',value:function(t,e,n) {const i=this;Array.isArray(e)?e.forEach(function(t) {return i.changeMutedState(t,n);}):this.changeMutedState(e,n),this.sendProperty(t,n);}},{key:'changeMutedState',value:function(t) {const e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t instanceof HTMLElement&&(t.classList.remove('unmuted'),t.classList.remove('muted'),t.classList.add(e?'muted':'unmuted'));}}]),e;}(),Mn=function() {function t(e) {const n=e.slider,i=e.control,o=e.min,r=void 0===o?0:o,s=e.max,u=void 0===s?1:s,a=e.step,l=void 0===a?.1:a,c=e.defaultValue,h=void 0===c?1:c;Ze(this,t),this.min=r,this.max=u,this.step=l,this.sliderValue=h,this.control=i,this.slider=this.setUpSlider(n,i);} return en(t,[{key:'setUpSlider',value:function(t,e) {if ('string'==typeof t&&(t=document.querySelector(t)),!t||'range'!==t.type) {return null;} const n=Bn.read(e);return t.min=this.min,t.max=this.max,t.step=this.step,(n||0===n)&&n.toString().trim().length>0?(t.value=n,this.sliderValue=n):t.value=this.sliderValue,t;}},{key:'sliderRange',value:function(t) {return t<this.min?this.min:t> this.max?this.max:t;}},{key:'enableSliderEvents',value:function(t) {if (this.slider) {const e=t;this.slider.addEventListener('change',e),this.slider.addEventListener('input',e);}}},{key:'disableSliderEvents',value:function(t) {if (this.slider) {const e=t;this.slider.removeEventListener('change',e),this.slider.removeEventListener('input',e);}}},{key:'displaySlider',value:function(t) {this.slider&&(this.slider.style.display=t[this.control]?'':'none');}},{key:'dispatchEvent',value:function(t) {this.slider.dispatchEvent(t);}},{key:'value',get:function() {return this.slider.value;},set:function(t) {this.slider.value=t;}}]),t;}(),Cn=function() {function t(e) {const n=e.button,i=e.onClick,o=e.channel;Ze(this,t),this.button=n instanceof HTMLElement?n:document.querySelector(n),this.onClick=i,this.channel=o,this.button&&this.button.addEventListener('click',i);} return en(t,[{key:'displayButton',value:function(t) {this.button instanceof HTMLElement&&(this.button.style.display=t[this.channel]||'pause'===this.channel||'hints'===this.channel?'':'none');}},{key:'enableButton',value:function() {this.button&&this.button.classList.remove('disabled');}}]),t;}(),On='captionsStyles',An={size:'md',background:'black-semi',color:'white',edge:'none',font:'arial',align:'top'},Tn=function(t) {function e(t) {let n;return Ze(this,e),(n=un(this,on(e).call(this,'Caption-Button-Plugin'))).sendAllProperties=n.sendAllProperties.bind(sn(n)),n.captionsStyles=Object.assign({},An,Bn.read(On)||{}),n._captionsButton=new Cn({button:t,onClick:n.captionsButtonClick.bind(sn(n)),channel:'captions'}),n._captionsMuted=!1,n._captionsButton?n:(console.warn('SpringRollContainer: CaptionPlugin was not provided a button element'),un(n));} return nn(e,Ln),en(e,[{key:'init',value:function() {this.client.on('features',function(t) {this._captionsButton.displayButton(t.data),null!==Bn.read('captionsMuted')&&(this.captionsMuted=!!Bn.read('captionsMuted'));}.bind(this)),this.client.on('loaded',function() {}),this.client.on('loadDone',function() {}),this.client.on('caption-set-style',function(t) {this.setCaptionsStyles(t.data||{});}.bind(this)),this._captionsButton.enableButton();}},{key:'start',value:function() {this.captionsMuted=!!Bn.read('captionsMuted'),this.setCaptionsStyles(Bn.read(On)),this.client.on('loaded',this.sendAllProperties),this.client.on('loadDone',this.sendAllProperties);}},{key:'sendAllProperties',value:function() {this.sendProperty('captionsMuted',this.captionsMuted),this.sendProperty(On,this.captionsStyles);}},{key:'captionsButtonClick',value:function() {this.captionsMuted=!this.captionsMuted;}},{key:'clearCaptionsStyles',value:function() {this.captionsStyles=Object.assign({},An),this.setCaptionsStyles();}},{key:'getCaptionsStyles',value:function(t) {return t?this.captionsStyles[t]:this.captionsStyles;}},{key:'setCaptionsStyles',value:function() {const t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'';'object'===Xe(t)?Object.assign(this.captionsStyles,t):'string'==typeof t&&(this.captionsStyles[t]=e),Bn.write(On,this.captionsStyles),this.client&&this.client.send(On,this.captionsStyles);}},{key:'captionsMuted',get:function() {return this._captionsMuted;},set:function(t) {this._captionsMuted=t,this._setMuteProp('captionsMuted',this.captionsButton,this._captionsMuted);}},{key:'captionsButton',get:function() {return this._captionsButton.button;}}]),e;}(),jn=function(t) {function e(t) {let n;return Ze(this,e),(n=un(this,on(e).call(this,'Help-Button-Plugin')))._helpButton=new Cn({button:t,onClick:n.helpButtonClick.bind(sn(n)),channel:'hints'}),n.paused=!1,n._helpEnabled=!1,n.onPause=n.onPause.bind(sn(n)),n;} return nn(e,Ln),en(e,[{key:'onPause',value:function(t) {this.paused=t.data.paused,this.paused&&!this._helpButton.button.classList.contains('disabled')?(this._helpButton.button.setAttribute('data-paused','true'),this.helpEnabled=!1):this._helpButton.button.getAttribute('data-paused')&&(this._helpButton.button.setAttribute('data-paused',''),this.helpEnabled=!0);}},{key:'helpButtonClick',value:function() {this.paused||this._helpButton.button.classList.contains('disabled')||this.client.send('playHelp');}},{key:'init',value:function() {this.client.on('paused',this.onPause.bind(this)),this.client.on('features',function(t) {this.helpEnabled=t.data.hints,this._helpButton.displayButton(t.data);}.bind(this)),this._helpButton.button instanceof HTMLElement&&this.client.on('helpEnabled',function(t) {this._helpEnabled=!!t.data;}.bind(this));}},{key:'helpEnabled',get:function() {return this._helpEnabled;},set:function(t) {this._helpEnabled=t,this._helpButton.button.classList.remove('disabled'),this._helpButton.button.classList.remove('enabled'),this._helpButton.button.classList.add(t?'enabled':'disabled'),this.client.trigger('helpEnabled');}},{key:'helpButton',get:function() {return this._helpButton.button;}}]),e;}(),Vn=function(t) {function e(t) {let n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'.pause-on-focus';if (Ze(this,e),(n=un(this,on(e).call(this,'Pause-Button-plugin')))._appBlurred=!1,n._containerBlurred=!1,n._focusTimer=null,n._isManualPause=!1,n._keepFocus=!1,n._paused=!1,n.iframe=null,n.focus=n.focus.bind(sn(n)),n.manageFocus=n.manageFocus.bind(sn(n)),n.onKeepFocus=n.onKeepFocus.bind(sn(n)),n.onPauseFocus=n.onPauseFocus.bind(sn(n)),n.paused=!1,n.pauseDisabled=!1,n._pauseButton=[],n.pageVisibility=new En(n.onContainerFocus.bind(sn(n)),n.onContainerBlur.bind(sn(n))),document.addEventListener('focus',n.focus),n.pauseButtons=document.querySelectorAll(t),0<n.pauseButtons.length) {for (let o=n.onPauseToggle.bind(sn(n)),r=0,s=n.pauseButtons.length;r<s;r++) {n._pauseButton.push(new Cn({button:n.pauseButtons[r],onClick:o,channel:'pause'}));}} if (n.pauseFocus=document.querySelectorAll(i),!n.pauseFocus) {return un(n);} for (let u=0,a=n.pauseFocus.length;u<a;u++) {n.pauseFocus[u].addEventListener('focus',n.onPauseFocus);} return n;} return nn(e,Ln),en(e,[{key:'onPauseFocus',value:function(t) {this._isManualPause=this.paused=this.pause=!0,t.srcElement.addEventListener('blur',function() {this._isManualPause=this.paused=this.pause=!1,this.focus();}.bind(this),{once:!0});}},{key:'focus',value:function() {this.hasDom&&this.iframe.contentWindow.focus();}},{key:'blur',value:function() {this.hasDom&&this.iframe.contentWindow.blur();}},{key:'manageFocus',value:function() {this._keepFocus&&this.blur(),this._focusTimer&&clearTimeout(this._focusTimer),this._focusTimer=setTimeout(function() {this._focusTimer=null,this._isManualPause||(this.paused=Boolean(this._containerBlurred&&this._appBlurred),this._keepFocus&&!this._containerBlurred&&this._appBlurred&&this.focus());}.bind(this),100);}},{key:'onKeepFocus',value:function(t) {this._keepFocus=!!t.data,this.manageFocus();}},{key:'onFocus',value:function(t) {this._appBlurred=!t.data,this.manageFocus();}},{key:'onContainerFocus',value:function() {this._containerBlurred=!1,this.manageFocus();}},{key:'onContainerBlur',value:function() {this._containerBlurred=this._appBlurred=!0,this.manageFocus();}},{key:'onPauseToggle',value:function() {this.pause=!this._paused,this._isManualPause=this.paused;}},{key:'init',value:function(t) {const e=t.iframe;this.iframe=e,this.client.on('features',function(t) {t.disablePause&&(this.pauseDisabled=!0);for (let e=0,n=this._pauseButton.length;e<n;e++) {this._pauseButton[e].displayButton(t.data);}}.bind(this)),this.client.on('focus',this.onFocus.bind(this)),this.client.on('keepFocus',this.onKeepFocus.bind(this)),this.pause=this._paused,this.focus();}},{key:'pause',set:function(t) {if (t=!!t,!this.pauseDisabled) {this._paused=t,this.client.send('pause',t),this.client.trigger(t?'paused':'resumed',{paused:this._paused});for (let e=0,n=this._pauseButton.length;e<n;e++) {this._pauseButton[e].button.classList.remove('unpaused'),this._pauseButton[e].button.classList.remove('paused'),this._pauseButton[e].button.classList.add(t?'paused':'unpaused');}}},get:function() {return this._paused;}},{key:'hasDom',get:function() {return Boolean(null!==this.iframe&&this.iframe.contentWindow);}},{key:'pauseButton',get:function() {for (var t=[],e=0,n=this._pauseButton.length;e<n;e++) {t.push(this._pauseButton[e].button);} return t;}}]),e;}(),Kn=function(t) {function e() {let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.soundButton,o=n.musicButton,r=n.sfxButton,s=n.voButton,u=n.soundSlider,a=n.musicSlider,l=n.sfxSlider,c=n.voSlider;Ze(this,e),t=un(this,on(e).call(this,'Sound-Button-Plugin'));const h=Bn.read(e.soundMutedKey);return t.sendAllProperties=t.sendAllProperties.bind(sn(t)),t._soundMuted=h||!1,t._musicMuted=!1,t._voMuted=!1,t._sfxMuted=!1,t.soundVolume=1,t.musicVolume=1,t.sfxVolume=1,t.voVolume=1,t.soundSlider=new Mn({slider:u,control:e.soundVolumeKey,defaultValue:t.soundVolume}),t.musicSlider=new Mn({slider:a,control:e.musicVolumeKey,defaultValue:t.musicVolume}),t.sfxSlider=new Mn({slider:l,control:e.sfxVolumeKey,defaultValue:t.sfxVolume}),t.voSlider=new Mn({slider:c,control:e.voVolumeKey,defaultValue:t.voVolume}),t._soundButton=new Cn({button:i,onClick:t.onSoundToggle.bind(sn(t)),channel:'sound'}),t._musicButton=new Cn({button:o,onClick:t.onMusicToggle.bind(sn(t)),channel:'music'}),t._sfxButton=new Cn({button:r,onClick:t.onSFXToggle.bind(sn(t)),channel:'sfx'}),t._voButton=new Cn({button:s,onClick:t.onVOToggle.bind(sn(t)),channel:'vo'}),t.soundSlider.enableSliderEvents(t.onSoundVolumeChange.bind(sn(t))),t.musicSlider.enableSliderEvents(t.onMusicVolumeChange.bind(sn(t))),t.sfxSlider.enableSliderEvents(t.onSfxVolumeChange.bind(sn(t))),t.voSlider.enableSliderEvents(t.onVoVolumeChange.bind(sn(t))),t.soundVolume=t.soundSlider.value,t.musicVolume=t.musicSlider.value,t.sfxVolume=t.sfxSlider.value,t.voVolume=t.voSlider.value,t;} return nn(e,Ln),en(e,[{key:'onSoundVolumeChange',value:function() {this.soundVolume=this.soundSlider.sliderRange(Number(this.soundSlider.value)),this.soundMuted=!this.soundVolume,this._checkSoundMute(),this.sendProperty(e.soundVolumeKey,this.soundVolume);}},{key:'onMusicVolumeChange',value:function() {this.musicVolume=this.musicSlider.sliderRange(Number(this.musicSlider.value)),this.musicMuted=!this.musicVolume,this._checkSoundMute(),this.sendProperty(e.musicVolumeKey,this.musicVolume);}},{key:'onVoVolumeChange',value:function() {this.voVolume=this.voSlider.sliderRange(Number(this.voSlider.value)),this.voMuted=!this.voVolume,this._checkSoundMute(),this.sendProperty(e.voVolumeKey,this.voVolume);}},{key:'onSfxVolumeChange',value:function() {this.sfxVolume=this.sfxSlider.sliderRange(Number(this.sfxSlider.value)),this.sfxMuted=!this.sfxVolume,this._checkSoundMute(),this.sendProperty(e.sfxVolumeKey,this.sfxVolume);}},{key:'onSoundToggle',value:function() {const t=!this.soundMuted;this.soundMuted=t,this.musicMuted=t,this.voMuted=t,this.sfxMuted=t;}},{key:'onMusicToggle',value:function() {this.musicMuted=!this.musicMuted,this._checkSoundMute();}},{key:'onVOToggle',value:function() {this.voMuted=!this.voMuted,this._checkSoundMute();}},{key:'onSFXToggle',value:function() {this.sfxMuted=!this.sfxMuted,this._checkSoundMute();}},{key:'_checkSoundMute',value:function() {this.soundMuted=this.sfxMuted&&this.voMuted&&this.musicMuted;}},{key:'setMuteProp',value:function(t,e,n) {this['_'+t]=e,this._setMuteProp(t,n,e);}},{key:'init',value:function() {this.client.on('features',function(t) {t.data&&(this._soundButton.displayButton(t.data),this._musicButton.displayButton(t.data),this._sfxButton.displayButton(t.data),this._voButton.displayButton(t.data),this.soundSlider.displaySlider(t.data),this.sfxSlider.displaySlider(t.data),this.voSlider.displaySlider(t.data),this.musicSlider.displaySlider(t.data));}.bind(this));}},{key:'start',value:function() {this._soundButton.enableButton(),this._musicButton.enableButton(),this._sfxButton.enableButton(),this._voButton.enableButton(),this.soundMuted=!!Bn.read(e.soundMutedKey),this.musicMuted=!!Bn.read(e.musicMutedKey),this.sfxMuted=!!Bn.read(e.sfxMutedKey),this.voMuted=!!Bn.read(e.voMutedKey),this.client.on('loaded',this.sendAllProperties),this.client.on('loadDone',this.sendAllProperties);}},{key:'sendAllProperties',value:function() {this.sendProperty(e.soundVolumeKey,this.soundVolume),this.sendProperty(e.musicVolumeKey,this.musicVolume),this.sendProperty(e.voVolumeKey,this.voVolume),this.sendProperty(e.sfxVolumeKey,this.sfxVolume),this.sendProperty(e.voMutedKey,this.voMuted),this.sendProperty(e.soundMutedKey,this.soundMuted),this.sendProperty(e.musicMutedKey,this.musicMuted),this.sendProperty(e.sfxMutedKey,this.sfxMuted);}},{key:'soundMuted',set:function(t) {this.setMuteProp('soundMuted',t,this.soundButton);},get:function() {return this._soundMuted;}},{key:'voMuted',set:function(t) {this.setMuteProp('voMuted',t,this.voButton);},get:function() {return this._voMuted;}},{key:'musicMuted',set:function(t) {this.setMuteProp('musicMuted',t,this.musicButton);},get:function() {return this._musicMuted;}},{key:'sfxMuted',set:function(t) {this.setMuteProp('sfxMuted',t,this.sfxButton);},get:function() {return this._sfxMuted;}},{key:'soundButton',get:function() {return this._soundButton.button;}},{key:'musicButton',get:function() {return this._musicButton.button;}},{key:'sfxButton',get:function() {return this._sfxButton.button;}},{key:'voButton',get:function() {return this._voButton.button;}}],[{key:'soundMutedKey',get:function() {return 'soundMuted';}},{key:'voMutedKey',get:function() {return 'voMuted';}},{key:'musicMutedKey',get:function() {return 'musicMuted';}},{key:'sfxMutedKey',get:function() {return 'sfxMuted';}},{key:'soundVolumeKey',get:function() {return 'soundVolume';}},{key:'sfxVolumeKey',get:function() {return 'sfxVolume';}},{key:'voVolumeKey',get:function() {return 'voVolume';}},{key:'musicVolumeKey',get:function() {return 'musicVolume';}}]),e;}(),Fn=function() {function t() {Ze(this,t);} return en(t,null,[{key:'remove',value:function(t,e) {Bn.remove(t),e();}},{key:'write',value:function(t,e,n) {Bn.write(t,e),n();}},{key:'read',value:function(t,e) {e(Bn.read(t));}}]),t;}(),Dn=function(t) {function e() {return Ze(this,e),un(this,on(e).call(this,'UserData-Plugin'));} return nn(e,xn),en(e,[{key:'init',value:function() {this.client.on('userDataRemove',this.onUserDataRemove.bind(this)),this.client.on('userDataRead',this.onUserDataRead.bind(this)),this.client.on('userDataWrite',this.onUserDataWrite.bind(this));}},{key:'onUserDataRemove',value:function(t) {const e=this,n=t.data,i=t.type;Fn.remove(n,function() {e.client.send(i);});}},{key:'onUserDataRead',value:function(t) {const e=this,n=t.data,i=t.type;Fn.read(n,function(t) {return e.client.send(i,t);});}},{key:'onUserDataWrite',value:function(t) {const e=this,n=t.type,i=t.data,o=i.name,r=i.value;Fn.write(o,r,function() {return e.client.send(n);});}}]),e;}(),Rn=function(t) {function e() {let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.pointerSlider,o=n.buttonSlider,r=n.defaultPointerSize,s=void 0===r?.5:r,u=n.defaultButtonSize,a=void 0===u?.5:u;return Ze(this,e),(t=un(this,on(e).call(this,'UISize-Button-Plugin'))).sendAllProperties=t.sendAllProperties.bind(sn(t)),t.pointerSize=s,t.buttonSize=a,t.pointerSlider=new Mn({slider:i,control:e.pointerSizeKey,defaultValue:t.pointerSize}),t.buttonSlider=new Mn({slider:o,control:e.buttonSizeKey,defaultValue:t.buttonSize}),t.pointerSlider.enableSliderEvents(t.onPointerSizeChange.bind(sn(t))),t.buttonSlider.enableSliderEvents(t.onButtonSizeChange.bind(sn(t))),t.pointerSize=t.pointerSlider.value,t.buttonSize=t.buttonSlider.value,t;} return nn(e,xn),en(e,[{key:'onPointerSizeChange',value:function() {this.pointerSize=this.pointerSlider.sliderRange(Number(this.pointerSlider.slider.value)),this.sendProperty(e.pointerSizeKey,this.pointerSize);}},{key:'onButtonSizeChange',value:function() {this.buttonSize=this.buttonSlider.sliderRange(Number(this.buttonSlider.slider.value)),this.sendProperty(e.buttonSizeKey,this.buttonSize);}},{key:'init',value:function() {this.client.on('features',function(t) {t.data&&(this.pointerSlider.displaySlider(t.data),this.buttonSlider.displaySlider(t.data));}.bind(this));}},{key:'start',value:function() {this.client.on('loaded',this.sendAllProperties),this.client.on('loadDone',this.sendAllProperties);}},{key:'sendAllProperties',value:function() {this.sendProperty(e.pointerSizeKey,this.pointerSize),this.sendProperty(e.buttonSizeKey,this.buttonSize);}},{key:'soundMuted',set:function(t) {this.setMuteProp('soundMuted',t,this.soundButton);}}],[{key:'pointerSizeKey',get:function() {return 'pointerSize';}},{key:'buttonSizeKey',get:function() {return 'buttonSize';}}]),e;}(),In=function(t) {function e() {let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.sensitivitySlider,o=n.defaultSensitivity,r=void 0===o?.5:o,s=n.keyContainer;return Ze(this,e),(t=un(this,on(e).call(this,'Control-Button-Plugin'))).controlSensitivity=r,t.sendAllProperties=t.sendAllProperties.bind(sn(t)),t.keyContainer=s instanceof HTMLElement?s:document.querySelector(s),t.keyBindings={},t.buttons=[],t.activekeyButton,t.sendAfterFetch=!1,t.canEmit=!1,t.sensitivitySlider=new Mn({slider:i,control:e.controlSensitivityKey,defaultValue:t.controlSensitivity}),t.sensitivitySlider.enableSliderEvents(t.onControlSensitivityChange.bind(sn(t))),t.controlSensitivity=t.sensitivitySlider.value,t.bindKey=t.bindKey.bind(sn(t)),t.onKeyButtonClick=t.onKeyButtonClick.bind(sn(t)),t;} return nn(e,xn),en(e,[{key:'onControlSensitivityChange',value:function() {this.controlSensitivity=this.sensitivitySlider.sliderRange(Number(this.sensitivitySlider.slider.value)),this.sendProperty(e.controlSensitivityKey,this.controlSensitivity);}},{key:'onKeyButtonClick',value:function(t) {for (let e=0,n=this.buttons.length;e<n;e++) {this.buttons[e].removeEventListener('click',this.onKeyButtonClick);} this.activekeyButton=t.target,this.activekeyButton.textContent='Press Key to Map',document.addEventListener('keyup',this.bindKey);}},{key:'bindKey',value:function(t) {for (const n in t.preventDefault(),this.keyBindings) {if (this.keyBindings[n].currentKey===t.key.toLowerCase()) {return void console.warn(''.concat(t.key,' is already bound'));}} this.activekeyButton.textContent=' '===t.key?'space':t.key,this.keyBindings[this.activekeyButton.value].currentKey=t.key,document.removeEventListener('keyup',this.bindKey);for (let i=0,o=this.buttons.length;i<o;i++) {this.buttons[i].addEventListener('click',this.onKeyButtonClick);} this.sendProperty(e.keyBindingKey,this.keyBindings);}},{key:'init',value:function() {this.client.on('features',function(t) {const n=this;if (t.data&&(this.sensitivitySlider.displaySlider(t.data),t.data.keyBinding)) {const i=Bn.read(e.keyBindingKey);this.client.fetch('keyBindings',function(t) {for (let e=0,o=t.data.length;e<o;e++) {let r=void 0;r=i[t.data[e].actionName]?i[t.data[e].actionName].currentKey:t.data[e].defaultKey.toLowerCase(),n.keyBindings[t.data[e].actionName]={defaultKey:t.data[e].defaultKey.toLowerCase(),currentKey:r},n.buttons[e]=document.createElement('button'),n.buttons[e].classList.add('key-binding__button'),n.buttons[e].value=t.data[e].actionName,n.buttons[e].textContent=t.data[e].defaultKey,n.buttons[e].addEventListener('click',n.onKeyButtonClick),n.label=document.createElement('label'),n.label.textContent=t.data[e].actionName,n.keyContainer.appendChild(n.label),n.keyContainer.appendChild(n.buttons[e]);}n.canEmit=!0,n.sendAfterFetch&&n.sendAllProperties();});}}.bind(this));}},{key:'start',value:function() {this.client.on('loaded',this.sendAllProperties),this.client.on('loadDone',this.sendAllProperties);}},{key:'sendAllProperties',value:function() {this.canEmit?(this.sendProperty(e.controlSensitivityKey,this.controlSensitivity),this.sendProperty(e.keyBindingKey,this.keyBindings)):this.sendAfterFetch=!0;}}],[{key:'controlSensitivityKey',get:function() {return 'controlSensitivity';}},{key:'keyBindingKey',get:function() {return 'keyBinding';}}]),e;}(),Nn=function(t) {function e(t) {let n,i=t.layersSlider;return Ze(this,e),(n=un(this,on(e).call(this,'layer-plugin'))).sendAllProperties=n.sendAllProperties.bind(sn(n)),n.layersSlider=new Mn({slider:i,control:'removableLayers',defaultValue:0}),n.layerValue=n.layersSlider.value,n.layersSlider.enableSliderEvents(n.onLayerValueChange.bind(sn(n))),n;} return nn(e,xn),en(e,[{key:'onLayerValueChange',value:function() {this.layerValue=this.layersSlider.sliderRange(Number(this.layersSlider.slider.value)),this.sendProperty(e.layerValueKey,this.layerValue);}},{key:'init',value:function() {this.client.on('features',function(t) {t.data&&this.layersSlider.displaySlider(t.data);}.bind(this));}},{key:'start',value:function() {this.client.on('loaded',this.sendAllProperties),this.client.on('loadDone',this.sendAllProperties);}},{key:'sendAllProperties',value:function() {this.sendProperty(e.layerValueKey,this.layerValue);}}],[{key:'layerValueKey',get:function() {return 'removableLayers';}}]),e;}(),Gn=function(t) {function e() {let t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hudSelectorButton;return Ze(this,e),(t=un(this,on(e).call(this,'HUD-Layout-Plugin'))).hudSelectorButton=n,t.sendAllProperties=t.sendAllProperties.bind(sn(t)),t.sendAfterFetch=!1,t.canEmit=!1,t._hudButton,t.supportedPositions=['top','bottom','left','right'],t.positions=[],t.currentPos=0,t.hudSelectorButton?t:(console.warn('SpringRollContainer: HUDPlugin was not provided a button element or selector string'),un(t));} return nn(e,Ln),en(e,[{key:'onHUDToggle',value:function() {this.currentPos=this.currentPos+1<this.positions.length?this.currentPos+1:this.currentPos=0,this.sendProperty(e.hudPositionKey,this.positions[this.currentPos]);}},{key:'init',value:function() {this.client.on('features',function(t) {const e=this;t.data&&t.data.hudPosition&&(this.client.fetch('hudPositions',function(t) {for (let n=0,i=t.data.length;n<i;n++) {e.supportedPositions.includes(t.data[n].toLowerCase())?e.positions.push(t.data[n]):console.warn(''.concat(t.data[n],' is an invalid position name'));}e.canEmit=!0,e.sendAfterFetch&&e.sendAllProperties();}),this._hudButton=new Cn({button:this.hudSelectorButton,onClick:this.onHUDToggle.bind(this),channel:'hudPosition'}));}.bind(this));}},{key:'start',value:function() {const t=this.positions.indexOf(Bn.read(this.hudPositionKey));t>=0&&(this.currentPos=t),this.client.on('loaded',this.sendAllProperties),this.client.on('loadDone',this.sendAllProperties);}},{key:'sendAllProperties',value:function() {this.canEmit?this.sendProperty(e.hudPositionKey,this.positions[this.currentPos]):this.sendAfterFetch=!0;}},{key:'hudButton',get:function() {return this._hudButton.button;}}],[{key:'hudPositionKey',get:function() {return 'hudPosition';}}]),e;}(),Un=function(t) {function e() {let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.hitAreaScaleSlider,o=n.defaultHitAreaScale,r=void 0===o?.5:o,s=n.dragThresholdScaleSlider,u=n.defaultDragThresholdScale,a=void 0===u?.5:u,l=n.healthSlider,c=n.defaultHealth,h=void 0===c?.5:c,d=n.objectCountSlider,f=n.defaultObjectCount,p=void 0===f?.5:f,y=n.completionPercentageSlider,v=n.defaultCompletionPercentage,g=void 0===v?.5:v,m=n.speedScaleSlider,b=n.defaultSpeedScale,w=void 0===b?.5:b,S=n.timersScaleSlider,k=n.defaultTimersScale,_=void 0===k?.5:k,P=n.inputCountSlider,E=n.defaultInputCount,B=void 0===E?.5:E;return Ze(this,e),(t=un(this,on(e).call(this,'Mechanics-Plugin'))).sendAllProperties=t.sendAllProperties.bind(sn(t)),t.values={hitAreaScale:r,dragThresholdScale:a,health:h,objectCount:p,completionPercentage:g,speedScale:w,timersScale:_,inputCount:B},t.sliders={hitAreaScaleSlider:new Mn({slider:i,control:e.hitAreaScaleKey,defaultValue:t.values.hitAreaScale}),dragThresholdScaleSlider:new Mn({slider:s,control:e.dragThresholdScaleKey,defaultValue:t.values.dragThresholdScale}),healthSlider:new Mn({slider:l,control:e.healthKey,defaultValue:t.values.health}),objectCountSlider:new Mn({slider:d,control:e.objectCountKey,defaultValue:t.values.objectCount}),completionPercentageSlider:new Mn({slider:y,control:e.completionPercentageKey,defaultValue:t.values.completionPercentage}),speedScaleSlider:new Mn({slider:m,control:e.speedScaleKey,defaultValue:t.values.speedScale}),timersScaleSlider:new Mn({slider:S,control:e.timersScaleKey,defaultValue:t.values.timersScale}),inputCountSlider:new Mn({slider:P,control:e.inputCountKey,defaultValue:t.values.inputCount})},Object.keys(t.sliders).forEach(function(e) {t.sliders[e].enableSliderEvents(function() {t.onMechanicsChange(t.sliders[e].control);}),t.values[t.sliders[e].control]=t.sliders[e].value;}),t;} return nn(e,xn),en(e,[{key:'onMechanicsChange',value:function(t) {this.values[t]=this.sliders[''.concat(t,'Slider')].sliderRange(Number(this.sliders[''.concat(t,'Slider')].slider.value)),this.sendProperty(e[''.concat(t,'Key')],this.values[t]);}},{key:'init',value:function() {this.client.on('features',function(t) {const e=this;t.data&&Object.keys(this.sliders).forEach(function(n) {e.sliders[n].displaySlider(t.data);});}.bind(this));}},{key:'start',value:function() {this.client.on('loaded',this.sendAllProperties),this.client.on('loadDone',this.sendAllProperties);}},{key:'sendAllProperties',value:function() {this.sendProperty(e.hitAreaScaleKey,this.values.hitAreaScale),this.sendProperty(e.dragThresholdScaleKey,this.values.dragThresholdScale),this.sendProperty(e.healthKey,this.values.health),this.sendProperty(e.objectCountKey,this.values.objectCount),this.sendProperty(e.completionPercentageKey,this.values.completionPercentage),this.sendProperty(e.speedScaleKey,this.values.speedScale),this.sendProperty(e.timersScaleKey,this.values.timersScale),this.sendProperty(e.inputCountKey,this.values.inputCount);}}],[{key:'hitAreaScaleKey',get:function() {return 'hitAreaScale';}},{key:'dragThresholdScaleKey',get:function() {return 'dragThresholdScale';}},{key:'healthKey',get:function() {return 'health';}},{key:'objectCountKey',get:function() {return 'objectCount';}},{key:'completionPercentageKey',get:function() {return 'completionPercentage';}},{key:'speedScaleKey',get:function() {return 'speedScale';}},{key:'timersScaleKey',get:function() {return 'timersScale';}},{key:'inputCountKey',get:function() {return 'inputCount';}}]),e;}(),zn=['none','protanopia','deuteranopia','tritanopia','achromatopsia'],Hn=function(t) {function e(t) {let n,i=t.colorSelect;return Ze(this,e),(n=un(this,on(e).call(this,'Color-Filter-Plugin'))).sendAllProperties=n.sendAllProperties.bind(sn(n)),n.colorDropdown=i instanceof HTMLSelectElement?i:document.querySelector(i),n.sendAfterFetch=!1,n.canEmit=!1,n.colorVisionValue='',n.colorDropdown?(n.colorDropdown.innerHTML='',n):(console.error('ColorVisionPlugin was not provided with a correct selector string'),un(n));} return nn(e,xn),en(e,[{key:'onColorChange',value:function() {this.colorVisionValue=this.colorDropdown.value,this.sendProperty(e.colorVisionKey,this.colorVisionValue);}},{key:'init',value:function() {this.client.on('features',function(t) {const e=this;if (t.data&&this.colorDropdown) {if ('select'!==this.colorDropdown.tagName.toLowerCase()) {return this.colorDropdown.style.display='none',void console.error('ColorVisionPlugin was given a '.concat(this.colorDropdown.tagName,' but expects an element of type: <select>'));} this.client.fetch('colorFilters',function(t) {for (let n=0,i=t.data.length;n<i;n++) {if (zn.includes(t.data[n].toLowerCase())) {const o=document.createElement('option');o.textContent=t.data[n],o.value=t.data[n].toLowerCase(),e.colorDropdown.appendChild(o);} else {console.warn(''.concat(t.data[n],' is not a supported color blindness filter'));}}e.colorDropdown.addEventListener('change',e.onColorChange.bind(e)),e.colorVisionValue=e.colorDropdown.value,e.canEmit=!0,e.sendAfterFetch&&e.sendAllProperties();}),this.colorDropdown.style.display=t.data.colorVision?'':'none';}}.bind(this));}},{key:'start',value:function() {const t=Bn.read(this.colorVisionKey);zn.includes(t)&&(this.colorVisionValue=t,this.colorDropdown.value=this.colorVisionValue),this.client.on('loaded',this.sendAllProperties),this.client.on('loadDone',this.sendAllProperties);}},{key:'sendAllProperties',value:function() {this.canEmit?this.sendProperty(e.colorVisionKey,this.colorVisionValue):this.sendAfterFetch=!0;}}],[{key:'colorVisionKey',get:function() {return 'colorVision';}}]),e;}();export {xn as BasePlugin,Cn as Button,Ln as ButtonPlugin,Tn as CaptionsPlugin,Hn as ColorVisionPlugin,Pn as Container,In as ControlsPlugin,an as Features,Gn as HUDPlugin,jn as HelpPlugin,Nn as LayersPlugin,Un as MechanicsPlugin,En as PageVisibility,Vn as PausePlugin,Bn as SavedData,Fn as SavedDataHandler,Mn as Slider,Kn as SoundPlugin,Rn as UISizePlugin,Dn as UserDataPlugin};
//# sourceMappingURL=index.js.map
